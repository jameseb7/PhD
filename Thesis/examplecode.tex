% undo some CZT meddling with the hash symbol
\renewcommand\#{\char"0023}

\lstset{basicstyle=\ttfamily,keywordstyle=\bf,language=C,
  numbers=left, numberstyle=\scriptsize, stepnumber=1, numbersep=5pt,
  escapeinside={(*@}{@*)}, linewidth=\linewidth, breaklines=true,
  tabsize=3, alsoletter={\#},
  literate=*{\_}{{\discretionary{}{}{}}\_}{1}, alsoletter={\_},
  framexleftmargin=1cm, xleftmargin=1cm,
  postbreak=\mbox{$\hookrightarrow$}}

This appendix contains the C code for the examples considered in
Chapter~\ref{evaluation-chapter}.
We provide the code for each example in a separate
section:~\texttt{PersistentSignal} in
Section~\ref{PersistentSignal-code-section}, \texttt{Buffer} in
Section~\ref{Buffer-code-section}, and \texttt{Barrier} in
Section~\ref{Barrier-code-section}.

For each example, we first provide the code generated by our protoype
(Sections~\ref{PersistentSignal-code-our-subsection},
\ref{Buffer-code-our-subsection}
and~\ref{Barrier-code-our-subsection}), consisting of a file ending in
\texttt{.c} containing the code for each method and a file ending in
\texttt{.h} containing struct definitions used in the code.
After that, for each example, we provide the code of each method of
the program generated by our prototype along with the corresponding
icecap code for it (from the file \texttt{methods.c}), to aid
comparison
(Sections~\ref{PersistentSignal-code-comparison-subsection},
\ref{Buffer-code-comparison-subsection}
and~\ref{Barrier-code-comparison-subsection}).
This is due to the fact that the methods do not appear in the same
order in our code as in the icecap code, and that the SCJ API method
definitions are not relevant to the comparison of the code, since the
API implementations differ.
The methods are shown in the same order as they appear in the code
generated by our prototype.
We omit the full code generated by icecap due to its length, it can be
found among the online resources that accompany this thesis.
% TODO: insert URL here

Due to the presence of long identifiers in the code, some lines of
code are broken across lines in the display.
Lines that are the continuation of a line of code in the original file
are marked with a hooked arrow (\mbox{$\hookrightarrow$}) at the start
and are not given a separate line number.
The hooked arrow and the indentation that precedes it are not present
in the original C code, but any spaces and code immediately following
the hooked arrow are part of the original C code.

%\begin{landscape}

\section{\texorpdfstring{\texttt{PersistentSignal}}{PersistentSignal}}
\label{PersistentSignal-code-section}

\subsection{Code generated by our prototype}
\label{PersistentSignal-code-our-subsection}

\subsubsection{\texttt{PersistentSignal.c}}\hfill
\lstinputlisting{PersistentSignal.c}

\subsubsection{\texttt{PersistentSignal.h}}\hfill
\lstinputlisting{PersistentSignal.h}

% \subsection{Code generated by icecap}
% \label{PersistentSignal-code-icecap-subsection}

% \subsubsection{\texttt{classes.c}}
% \lstinputlisting{PersistentSignal_classes.c}

% \subsubsection{\texttt{classes.h}}
% \lstinputlisting{PersistentSignal_classes.h}

% \subsubsection{\texttt{methods.c}}
% \lstinputlisting{PersistentSignal_methods.c}

% \subsubsection{\texttt{methods.h}}
% \lstinputlisting{PersistentSignal_methods.h}

\subsection{Comparison of program code}
\label{PersistentSignal-code-comparison-subsection}

\subsubsection{\texttt{main\_MySafelet\_globalBackingStoreSize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=257]
void main_MySafelet_globalBackingStoreSize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 0;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_Producer\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=281]
void main_Producer_init_Lmain_PersistentSignal_Ljavax_safetycritical_AperiodicEventHandler_JJ_V(int32_t var1, int32_t var2, int32_t var3, int32_t var4, int32_t var5, int32_t var6, int32_t var7) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getNormPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_PeriodicParametersID);
	stack4 = stack3;
	stack5 = newObject(javax_realtime_RelativeTimeID);
	stack6 = stack5;
	stack7 = var6;
	stack8 = var7;
	stack9 = 0;
	javax_realtime_RelativeTime_init_JI_V(stack6, stack7, stack8, stack9);
	stack6 = newObject(javax_realtime_RelativeTimeID);
	stack7 = stack6;
	stack8 = var4;
	stack9 = var5;
	stack10 = 0;
	javax_realtime_RelativeTime_init_JI_V(stack7, stack8, stack9, stack10);
	javax_realtime_PeriodicParameters_init_Ljavax_realtime_RelativeTime_Ljavax_realtime_RelativeTime__V(stack4, stack5, stack6);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_PeriodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_PeriodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);
	stack1 = var1;
	stack2 = var2;
	((main_Producer *) ((uintptr_t)stack1))->_signalLmain_PersistentSignal_ = stack2;
	stack1 = var1;
	stack2 = var3;
	((main_Producer *) ((uintptr_t)stack1))->_workerLjavax_safetycritical_AperiodicEventHandler_ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54708]
int16 main_Producer_init_(int32 *fp, int32 this, int32 signal, int32 worker, int32 period_ms, int32 lv_4, int32 offset_ms, int32 lv_6)
{
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int32 i_val10;
	int32 i_val9;
	int16 rval_m_28;
	int16 rval_m_38;
	int32 hvm_arg_no_3_42;
	int32 hvm_arg_no_2_42;
	int32 hvm_arg_no_1_42;
	int16 rval_m_42;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_66;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_89;
	int16 rval_m_90;
	int32 hvm_arg_no_5_94;
	int32 hvm_arg_no_4_94;
	int32 hvm_arg_no_3_94;
	int32 hvm_arg_no_2_94;
	int32 hvm_arg_no_1_94;
	int16 rval_m_94;
	unsigned char* cobj;
	sp = &fp[9]; /* make room for local VM state on the stack */
	/*		super( */
	i_val12 = this;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	i_val12 = *(sp - 1);
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*)sp;
		i_val11 = rval_5;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getNormPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*)sp;
		i_val11 = rval_9;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	if (handleNewClassIndex(sp, 91) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val12 = *(sp - 1);
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 133) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val12 = *(sp - 1);
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val11 = offset_ms;
	i_val10 = lv_6;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val9 = 0;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	rval_m_28 = javax_realtime_RelativeTime_init__(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_28 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_28;
	}
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	if (handleNewClassIndex(sp, 133) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val12 = *(sp - 1);
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val11 = period_ms;
	i_val10 = lv_4;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val9 = 0;
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	rval_m_38 = javax_realtime_RelativeTime_init__(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_38 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_38;
	}
	/*				new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	sp--;
	hvm_arg_no_3_42 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_42 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_42 = (int32)(*sp);
	rval_m_42 = javax_realtime_PeriodicParameters_init_(sp, hvm_arg_no_1_42, hvm_arg_no_2_42, hvm_arg_no_3_42);
	if (rval_m_42 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_42;
	}
	/*				new StorageParameters( */
	if (handleNewClassIndex(sp, 64) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*				new StorageParameters( */
	rval_m_66 = javax_safetycritical_StorageParameters_init_(sp, i_val12, i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_66 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_66;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	if (handleNewClassIndex(sp, 14) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val12 = *(sp - 1);
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val11 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val10 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	s_val9 = 1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	_count_ = s_val9;
	narray = (Object*) createArray(48, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 77;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val8 = i_val9;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	b_val7 = 0;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_89 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_89[index_int8 << 1] = msb_int32;
	cobj_89[(index_int8 << 1) + 1] = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	rval_m_90 = javax_realtime_ConfigurationParameters_init_(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_90 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_90;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	sp--;
	hvm_arg_no_5_94 = (int32)(*sp);
	sp--;
	hvm_arg_no_4_94 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_94 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_94 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_94 = (int32)(*sp);
	rval_m_94 = javax_safetycritical_PeriodicEventHandler_init_(sp, hvm_arg_no_1_94, hvm_arg_no_2_94, hvm_arg_no_3_94, hvm_arg_no_4_94, hvm_arg_no_5_94);
	if (rval_m_94 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_94;
	}
	/*		this._signal = signal; */
	i_val12 = this;
	/*		this._signal = signal; */
	i_val11 = signal;
	/*		this._signal = signal; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _signal_f = lsb_int32;
	/*		this._worker = worker; */
	i_val12 = this;
	/*		this._worker = worker; */
	i_val11 = worker;
	/*		this._worker = worker; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _worker_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[531], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_PersistentSignal\_reset}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=514]
void main_PersistentSignal_reset__V(int32_t var1) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack2 = 0;
	((main_PersistentSignal *) ((uintptr_t)stack1))->_setZ = stack2;
	releaseLock(var1);
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54602]
int16 main_PersistentSignal_reset(int32 *fp, int32 this)
{
	int32 i_val1;
	int8 b_val0;
	unsigned char* cobj;
	int8 lsb_int8;
	/*		this._set = false; */
	i_val1 = this;
	/*		this._set = false; */
	b_val0 = 0;
	/*		this._set = false; */
	lsb_int8 = b_val0;
	cobj = (unsigned char *) (pointer)i_val1;
	((struct _main_PersistentSignal_c *)HEAP_REF(cobj, void*)) -> _set_f = lsb_int8;
	/*	} */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_cleanUp}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=646]
void main_MySafelet_cleanUp__V(int32_t var1) {
	
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_PersistentSignal\_isSet}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=814]
void main_PersistentSignal_isSet__Z(int32_t var1, int32_t * retVal) {
	int32_t stack1;
	stack1 = var1;
	stack1 = ((main_PersistentSignal *)  ((uintptr_t)stack1))->_setZ;
	releaseLock(var1);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54581]
int16 main_PersistentSignal_isSet(int32 *fp, int32 this)
{
	int32 i_val0;
	unsigned char* cobj;
	int8 b_val0;
	/*		return this._set; */
	i_val0 = this;
	/*		return this._set; */
	cobj = (unsigned char *) (pointer)i_val0;
	b_val0 = ((struct _main_PersistentSignal_c *)HEAP_REF(cobj, void*)) -> _set_f;
	/*		return this._set; */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return (uint8)b_val0;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_handleStartupError}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1177]
void main_MySafelet_handleStartupError_IJ_Z(int32_t var1, int32_t var2, int32_t var3, int32_t var4, int32_t * retVal) {
	int32_t stack1;
	stack1 = 0;
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_MainMission\_missionMemorySize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1256]
void main_MainMission_missionMemorySize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 1000000;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_MainSequence\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1271]
void main_MainSequence_init__V(int32_t var1) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_memory_ScopeParametersID);
	stack4 = stack3;
	stack5 = 0;
	stack6 = 702000;
	stack7 = 0;
	stack8 = 20000;
	stack9 = 0;
	stack10 = 100000;
	stack11 = 0;
	stack12 = 200000;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12);
	stack4 = newObject(javax_realtime_ConfigurationParametersID);
	stack5 = stack4;
	stack6 = -1;
	stack7 = -1;
	stack8 = newObject(java_lang_LongArray1ID);
	stack9 = stack8;
	stack10 = 0;
	stack11 = 6144;
	java_lang_LongArray1_init_J_V(stack9, stack10, stack11);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack5, stack6, stack7, stack8);
	javax_safetycritical_MissionSequencer_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54091]
int16 main_MainSequence_init_(int32 *fp) {
	int32* sp;
	int32 i_val11;
	int16 rval_m_5;
	int32 i_val10;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int32 i_val3;
	int16 rval_m_49;
	int16 s_val8;
	Object* narray;
	uint16 _count_;
	int8 b_val6;
	int8 index_int8;
	uint32* cobj_72;
	int16 rval_m_73;
	int32 hvm_arg_no_4_77;
	int32 hvm_arg_no_3_77;
	int32 hvm_arg_no_2_77;
	int32 hvm_arg_no_1_77;
	int16 rval_m_77;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		super( */
	i_val11 = this;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32) i_val11;
	sp++;
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val11 = *(sp - 1);
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*) sp;
		i_val10 = rval_5;
	} else {
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val10 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val10);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*) sp;
		i_val10 = rval_9;
	} else {
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val11, i_val10);
	if (rval_m_13 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_13;
	}
	/*				new StorageParameters( */
	if (handleNewClassIndex(sp, 64) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*				new StorageParameters( */
	i_val11 = *(sp - 1);
	/*						Const.OUTERMOST_SEQ_BACKING_STORE, */
	i_val10 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> OUTERMOST_SEQ_BACKING_STORE_f;
	/*						Const.OUTERMOST_SEQ_BACKING_STORE, */
	lsb_int32 = i_val10;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val10 = msb_int32;
	i_val9 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val8 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val8;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val8 = msb_int32;
	i_val7 = lsb_int32;
	/*						Const.IMMORTAL_MEM, */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> IMMORTAL_MEM_f;
	/*						Const.IMMORTAL_MEM, */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*						Const.MISSION_MEM), */
	i_val4 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> MISSION_MEM_f;
	/*						Const.MISSION_MEM), */
	lsb_int32 = i_val4;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val4 = msb_int32;
	i_val3 = lsb_int32;
	/*				new StorageParameters( */
	rval_m_49 = javax_safetycritical_StorageParameters_init_(sp, i_val11,
			i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4, i_val3);
	if (rval_m_49 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_49;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	if (handleNewClassIndex(sp, 14) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val11 = *(sp - 1);
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val10 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val9 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	s_val8 = 1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	_count_ = s_val8;
	narray = (Object*) createArray(48, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 60;
#endif
		goto throwOutOfMemory;
	}
	i_val8 = (int32) (pointer) narray;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val7 = i_val8;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	b_val6 = 0;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val5 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val5;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val5 = msb_int32;
	i_val4 = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val4;
	msb_int32 = i_val5;
	index_int8 = b_val6;
	cobj_72 = HEAP_REF((pointer)(i_val7 + sizeof(Object) + 2), uint32*);
	cobj_72[index_int8 << 1] = msb_int32;
	cobj_72[(index_int8 << 1) + 1] = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	rval_m_73 = javax_realtime_ConfigurationParameters_init_(sp, i_val11,
			i_val10, i_val9, i_val8);
	if (rval_m_73 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_73;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	sp--;
	hvm_arg_no_4_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_77 = (int32)(*sp);
	rval_m_77 = javax_safetycritical_MissionSequencer_init_(sp, hvm_arg_no_1_77,
			hvm_arg_no_2_77, hvm_arg_no_3_77, hvm_arg_no_4_77);
	if (rval_m_77 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_77;
	}
	/*	} */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory: excep = initializeException(sp,
			JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[520], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_Producer\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1525]
void main_Producer_handleAsyncEvent__V(int32_t var1) {
	int32_t var2;
	int32_t stack1, stack2;
	stack1 = -11;
	devices_Console_write_I_V(stack1);
	stack1 = var1;
	stack1 = ((main_Producer *)  ((uintptr_t)stack1))->_signalLmain_PersistentSignal_;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_PersistentSignalID) {
		takeLock(stack1);
		main_PersistentSignal_reset__V(stack1);
	}
	stack1 = var1;
	stack1 = ((main_Producer *)  ((uintptr_t)stack1))->_workerLjavax_safetycritical_AperiodicEventHandler_;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_WorkerID) {
		javax_safetycritical_AperiodicEventHandler_release__V(stack1);
	}
	stack1 = -12;
	devices_Console_write_I_V(stack1);
	stack1 = 0;
	var2 = stack1;
	stack1 = var2;
	stack2 = 1000000;
	while (stack1 < stack2) {
		var2 = var2 + 1;
		var2 = var2 + -1;
		var2 = var2 + 1;
		stack1 = var2;
		stack2 = 1000000;

	}
	stack1 = -13;
	devices_Console_write_I_V(stack1);
	stack1 = var1;
	stack1 = ((main_Producer *)  ((uintptr_t)stack1))->_signalLmain_PersistentSignal_;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_PersistentSignalID) {
		takeLock(stack1);
		main_PersistentSignal_isSet__Z(stack1, &stack1);
	}
	if (stack1 == 0) {
		stack1 = -140;
		devices_Console_write_I_V(stack1);
	} else {
		stack1 = -141;
		devices_Console_write_I_V(stack1);

	}

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55047]
int16 main_Producer_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_2;
	unsigned char* cobj;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_13;
	int16 rval_m_24;
	int16 rval_m_30;
	int32 i_val0;
	int16 rval_m_57;
	int16 rval_m_68;
	int8 b_val1;
	int16 rval_m_78;
	int16 rval_m_88;
	int32 i;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		devices.Console.println(-11); */
	i_val1 = (signed char)-11;
	/*		devices.Console.println(-11); */
	rval_m_2 = devices_Console_println(sp, i_val1);
	if (rval_m_2 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_2;
	}
	/*		this._signal.reset(); */
	i_val1 = this;
	/*		this._signal.reset(); */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _signal_f;
	/*		this._signal.reset(); */
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 13;
#endif
		goto throwNullPointer;
	}
	handleMonitorEnterExit((Object*)(pointer)i_val1, 1, sp, "");
	rval_m_13 = main_PersistentSignal_reset(sp, i_val1);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*		this._worker.release(); */
	i_val1 = this;
	/*		this._worker.release(); */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _worker_f;
	/*		this._worker.release(); */
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 24;
#endif
		goto throwNullPointer;
	}
	rval_m_24 = javax_safetycritical_AperiodicEventHandler_release(sp, i_val1);
	if (rval_m_24 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_24;
	}
	/*		devices.Console.println(-12); */
	i_val1 = (signed char)-12;
	/*		devices.Console.println(-12); */
	rval_m_30 = devices_Console_println(sp, i_val1);
	if (rval_m_30 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_30;
	}
	/*		for (int i = 0; i < 1000000; i++) { */
	i_val1 = 0;
	/*		for (int i = 0; i < 1000000; i++) { */
	i = i_val1;
	/*		for (int i = 0; i < 1000000; i++) { */
	goto L48;
	/*			i = i + 1; */
	L39:
	i = (int32)i + 1;
	/*			i = i - 1; */
	i = (int32)i + -1;
	/*		for (int i = 0; i < 1000000; i++) { */
	i = (int32)i + 1;
	/*		for (int i = 0; i < 1000000; i++) { */
	L48:
	i_val1 = (int32)i;
	/*		for (int i = 0; i < 1000000; i++) { */
	i_val0 = 1000000;
	/*		for (int i = 0; i < 1000000; i++) { */
	if (i_val1 < i_val0) {
		yieldToScheduler(sp);
		goto L39;
	}
	/*		devices.Console.println(-13); */
	i_val1 = (signed char)-13;
	/*		devices.Console.println(-13); */
	rval_m_57 = devices_Console_println(sp, i_val1);
	if (rval_m_57 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_57;
	}
	/*		if (this._signal.isSet()) { */
	i_val1 = this;
	/*		if (this._signal.isSet()) { */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _signal_f;
	/*		if (this._signal.isSet()) { */
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 68;
#endif
		goto throwNullPointer;
	}
	handleMonitorEnterExit((Object*)(pointer)i_val1, 1, sp, "");
	rval_m_68 = main_PersistentSignal_isSet(sp, i_val1);
	if (rval_m_68 >= 0) {
		b_val1 = rval_m_68;
	}
	else
	{
		rval_m_68 = -rval_m_68;
		fp[0] = *sp;
		return rval_m_68;
	}
	/*		if (this._signal.isSet()) { */
	if (b_val1 == 0) {
		goto L85;
	}
	/*			devices.Console.println(-141); */
	i_val1 = -141;
	/*			devices.Console.println(-141); */
	rval_m_78 = devices_Console_println(sp, i_val1);
	if (rval_m_78 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_78;
	}
	/*		} else { */
	goto L92;
	/*			devices.Console.println(-140); */
	L85:
	i_val1 = -140;
	/*			devices.Console.println(-140); */
	rval_m_88 = devices_Console_println(sp, i_val1);
	if (rval_m_88 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_88;
	}
	/*	} */
	L92:
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[532], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_Worker\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1574]
void main_Worker_init_Lmain_PersistentSignal__V(int32_t var1, int32_t var2) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_AperiodicParametersID);
	stack4 = stack3;
	javax_realtime_AperiodicParameters_init__V(stack4);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_AperiodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_AperiodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);
	stack1 = var1;
	stack2 = var2;
	((main_Worker *) ((uintptr_t)stack1))->_signalLmain_PersistentSignal_ = stack2;
	stack1 = var1;
	stack2 = 0;
	((main_Worker *) ((uintptr_t)stack1))->_iterationI = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55262]
int16 main_Worker_init_(int32 *fp, int32 this, int32 event)
{
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int16 rval_m_21;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val10;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_45;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_68;
	int16 rval_m_69;
	int16 rval_m_73;
	unsigned char* cobj;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		super( */
	i_val12 = this;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val12 = *(sp - 1);
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*)sp;
		i_val11 = rval_5;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*)sp;
		i_val11 = rval_9;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*				new AperiodicParameters(), */
	if (handleNewClassIndex(sp, 104) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new AperiodicParameters(), */
	i_val12 = *(sp - 1);
	/*				new AperiodicParameters(), */
	*sp = (int32)i_val12;
	sp++;
	sp -= 1;
	rval_m_21 = javax_realtime_AperiodicParameters_init_(sp);
	if (rval_m_21 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_21;
	}
	/*				new StorageParameters( */
	if (handleNewClassIndex(sp, 64) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*				new StorageParameters( */
	rval_m_45 = javax_safetycritical_StorageParameters_init_(sp, i_val12, i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_45 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_45;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	if (handleNewClassIndex(sp, 14) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val12 = *(sp - 1);
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val11 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val10 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	s_val9 = 1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	_count_ = s_val9;
	narray = (Object*) createArray(48, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 56;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val8 = i_val9;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	b_val7 = 0;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_68 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_68[index_int8 << 1] = msb_int32;
	cobj_68[(index_int8 << 1) + 1] = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	rval_m_69 = javax_realtime_ConfigurationParameters_init_(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_69 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_69;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	sp -= 5;
	rval_m_73 = enterMethodInterpreter(JAVAX_SAFETYCRITICAL_APERIODICEVENTHANDLER_INIT_, sp);
	if (rval_m_73 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_73;
	}
	/*		this._signal = event; */
	i_val12 = this;
	/*		this._signal = event; */
	i_val11 = event;
	/*		this._signal = event; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Worker_c *)HEAP_REF(cobj, void*)) -> _signal_f = lsb_int32;
	/*		this._iteration = 0; */
	i_val12 = this;
	/*		this._iteration = 0; */
	i_val11 = 0;
	/*		this._iteration = 0; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Worker_c *)HEAP_REF(cobj, void*)) -> _iteration_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[534], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_getSequencer}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1618]
void main_MySafelet_getSequencer__Ljavax_safetycritical_MissionSequencer_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = newObject(main_MainSequenceID);
	stack2 = stack1;
	main_MainSequence_init__V(stack2);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54422]
int16 main_MySafelet_getSequencer(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_4;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		return new MainSequence(); */
	if (handleNewClassIndex(sp, 110) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		return new MainSequence(); */
	i_val1 = *(sp - 1);
	/*		return new MainSequence(); */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_4 = main_MainSequence_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		return new MainSequence(); */
	sp--;
	*((int32*)fp) = (int32)(*sp);
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_PersistentSignal\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=257]
void main_PersistentSignal_init__V(int32_t var1) {
	int32_t stack1, stack2;
	stack1 = var1;
	java_lang_Object_init__V(stack1);
	stack1 = var1;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack2);
	if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack2, &stack2);
	}
	javax_safetycritical_Services_setCeiling_Ljava_lang_Object_I_V(stack1, stack2);
	stack1 = var1;
	stack2 = 0;
	((main_PersistentSignal *) ((uintptr_t)stack1))->_setZ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54473]
int16 main_PersistentSignal_init_(int32 *fp) {
	int32* sp;
	int32 i_val1;
	int16 rval_m_1;
	int16 rval_m_6;
	int32 i_val0;
	int32 rval_6;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_10;
	int32 rval_10;
	int16 rval_m_14;
	int8 b_val0;
	unsigned char* cobj;
	int8 lsb_int8;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		super(); */
	i_val1 = this;
	/*		super(); */
	*sp = (int32) i_val1;
	sp++;
	sp -= 1;
	rval_m_1 = java_lang_Object_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*		Services.setCeiling(this, PriorityScheduler.instance().getMaxPriority()); */
	i_val1 = this;
	/*		Services.setCeiling(this, PriorityScheduler.instance().getMaxPriority()); */
	sp += 1;
	rval_m_6 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_6 == -1) {
		rval_6 = *(int32*) sp;
		i_val0 = rval_6;
	} else {
		fp[0] = *sp;
		return rval_m_6;
	}
	sp -= 1;
	/*		Services.setCeiling(this, PriorityScheduler.instance().getMaxPriority()); */
	if (i_val0 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 10;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_10 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val0);
	if (rval_m_10 == -1) {
		rval_10 = *(int32*) sp;
		i_val0 = rval_10;
	} else {
		fp[0] = *sp;
		return rval_m_10;
	}
	sp -= 1;
	/*		Services.setCeiling(this, PriorityScheduler.instance().getMaxPriority()); */
	rval_m_14 = javax_safetycritical_Services_setCeiling(sp, i_val1, i_val0);
	if (rval_m_14 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_14;
	}
	/*		this._set = false; */
	i_val1 = this;
	/*		this._set = false; */
	b_val0 = 0;
	/*		this._set = false; */
	lsb_int8 = b_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	((struct _main_PersistentSignal_c *)HEAP_REF(cobj, void*)) -> _set_f = lsb_int8;
	/*	} */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[526], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MainMission\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1749]
void main_MainMission_init__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	javax_safetycritical_Mission_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=53918]
int16 main_MainMission_init_(int32 *fp) {
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*public class MainMission extends Mission { */
	i_val0 = this;
	/*public class MainMission extends Mission { */
	*sp = (int32) i_val0;
	sp++;
	sp -= 1;
	rval_m_1 = javax_safetycritical_Mission_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*public class MainMission extends Mission { */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_PersistentSignal\_set}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1811]
void main_PersistentSignal_set__V(int32_t var1) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack2 = 1;
	((main_PersistentSignal *) ((uintptr_t)stack1))->_setZ = stack2;
	releaseLock(var1);
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54627]
int16 main_PersistentSignal_set(int32 *fp, int32 this)
{
	int32 i_val1;
	int8 b_val0;
	unsigned char* cobj;
	int8 lsb_int8;
	/*		this._set = true; */
	i_val1 = this;
	/*		this._set = true; */
	b_val0 = 1;
	/*		this._set = true; */
	lsb_int8 = b_val0;
	cobj = (unsigned char *) (pointer)i_val1;
	((struct _main_PersistentSignal_c *)HEAP_REF(cobj, void*)) -> _set_f = lsb_int8;
	/*	} */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MainSequence\_getNextMission}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1869]
void main_MainSequence_getNextMission__Ljavax_safetycritical_Mission_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = newObject(main_MainMissionID);
	stack2 = stack1;
	main_MainMission_init__V(stack2);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54342]
int16 main_MainSequence_getNextMission(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_4;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		return new MainMission();   */
	if (handleNewClassIndex(sp, 73) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		return new MainMission();   */
	i_val1 = *(sp - 1);
	/*		return new MainMission();   */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_4 = main_MainMission_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		return new MainMission();   */
	sp--;
	*((int32*)fp) = (int32)(*sp);
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1970]
void main_MySafelet_init__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	java_lang_Object_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54391]
int16 main_MySafelet_init_(int32 *fp) {
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*public class MySafelet implements Safelet { */
	i_val0 = this;
	/*public class MySafelet implements Safelet { */
	*sp = (int32) i_val0;
	sp++;
	sp -= 1;
	rval_m_1 = java_lang_Object_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*public class MySafelet implements Safelet { */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_initializeApplication}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2184]
void main_MySafelet_initializeApplication__V(int32_t var1) {
	
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54461]
int16 main_MySafelet_initializeApplication(int32 *fp, int32 this)
{
	/*	} */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_Worker\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2230]
void main_Worker_handleAsyncEvent__V(int32_t var1) {
	int32_t stack1, stack2, stack3;
	stack1 = var1;
	stack2 = stack1;
	stack2 = ((main_Worker *)  ((uintptr_t)stack2))->_iterationI;
	stack3 = 1;
	stack2 = stack3 + stack2;
	((main_Worker *) ((uintptr_t)stack1))->_iterationI = stack2;
	stack1 = -2;
	devices_Console_write_I_V(stack1);
	stack1 = var1;
	stack1 = ((main_Worker *)  ((uintptr_t)stack1))->_iterationI;
	devices_Console_write_I_V(stack1);
	stack1 = var1;
	stack1 = ((main_Worker *)  ((uintptr_t)stack1))->_signalLmain_PersistentSignal_;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_PersistentSignalID) {
		takeLock(stack1);
		main_PersistentSignal_set__V(stack1);
	}

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55531]
int16 main_Worker_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val2;
	int32 i_val1;
	unsigned char* cobj;
	int8 b_val0;
	int8 msb_int8;
	int32 lsb_int32;
	int16 rval_m_18;
	int16 rval_m_29;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_40;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		this._iteration++; */
	i_val2 = this;
	/*		this._iteration++; */
	i_val1 = i_val2;
	/*		this._iteration++; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Worker_c *)HEAP_REF(cobj, void*)) -> _iteration_f;
	/*		this._iteration++; */
	b_val0 = 1;
	/*		this._iteration++; */
	msb_int8 = b_val0;
	lsb_int32 = i_val1;
	lsb_int32 += msb_int8;
	i_val1 = lsb_int32;
	/*		this._iteration++; */
	lsb_int32 = i_val1;
	cobj = (unsigned char *) (pointer)i_val2;
	((struct _main_Worker_c *)HEAP_REF(cobj, void*)) -> _iteration_f = lsb_int32;
	/*		devices.Console.println(-2); */
	i_val2 = (signed char)-2;
	/*		devices.Console.println(-2); */
	rval_m_18 = devices_Console_println(sp, i_val2);
	if (rval_m_18 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_18;
	}
	/*		devices.Console.println(this._iteration); */
	i_val2 = this;
	/*		devices.Console.println(this._iteration); */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Worker_c *)HEAP_REF(cobj, void*)) -> _iteration_f;
	/*		devices.Console.println(this._iteration); */
	rval_m_29 = devices_Console_println(sp, i_val2);
	if (rval_m_29 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_29;
	}
	/*		this._signal.set();		 */
	i_val2 = this;
	/*		this._signal.set();		 */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Worker_c *)HEAP_REF(cobj, void*)) -> _signal_f;
	/*		this._signal.set();		 */
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 40;
#endif
		goto throwNullPointer;
	}
	handleMonitorEnterExit((Object*)(pointer)i_val2, 1, sp, "");
	rval_m_40 = main_PersistentSignal_set(sp, i_val2);
	if (rval_m_40 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_40;
	}
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[535], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_immortalMemorySize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2301]
void main_MySafelet_immortalMemorySize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 10000;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_MainMission\_initialize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2329]
void main_MainMission_initialize__V(int32_t var1) {
	int32_t var2, var3;
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8;
	stack1 = newObject(main_PersistentSignalID);
	stack2 = stack1;
	main_PersistentSignal_init__V(stack2);
	var2 = stack1;
	stack1 = newObject(main_WorkerID);
	stack2 = stack1;
	stack3 = var2;
	main_Worker_init_Lmain_PersistentSignal__V(stack2, stack3);
	var3 = stack1;
	stack1 = var3;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_WorkerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}
	stack1 = newObject(main_ProducerID);
	stack2 = stack1;
	stack3 = var2;
	stack4 = var3;
	stack5 = 0;
	stack6 = 2000;
	stack7 = 0;
	stack8 = 0;
	main_Producer_init_Lmain_PersistentSignal_Ljavax_safetycritical_AperiodicEventHandler_JJ_V(stack2, stack3, stack4, stack5, stack6, stack7, stack8);
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ProducerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=53949]
int16 main_MainMission_initialize(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val7;
	int16 rval_m_4;
	int32 i_val6;
	int16 rval_m_14;
	int16 rval_m_20;
	int32 i_val5;
	int32 msi;
	int32 lsi;
	const unsigned char *data_;
	const ConstantInfo* constant_;
	int32 i_val4;
	int32 i_val3;
	int32 i_val2;
	int32 i_val1;
	int16 rval_m_34;
	int32 hvm_arg_no_1_38;
	int16 rval_m_38;
	int32 signal;
	int32 worker;
	sp = &fp[5]; /* make room for local VM state on the stack */
	/*		PersistentSignal signal = new PersistentSignal(); */
	if (handleNewClassIndex(sp, 7) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		PersistentSignal signal = new PersistentSignal(); */
	i_val7 = *(sp - 1);
	/*		PersistentSignal signal = new PersistentSignal(); */
	*sp = (int32)i_val7;
	sp++;
	sp -= 1;
	rval_m_4 = main_PersistentSignal_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		PersistentSignal signal = new PersistentSignal(); */
	sp--;
	signal = (int32)(*sp);
	/*		Worker worker = new Worker(signal); */
	if (handleNewClassIndex(sp, 69) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		Worker worker = new Worker(signal); */
	i_val7 = *(sp - 1);
	/*		Worker worker = new Worker(signal); */
	i_val6 = signal;
	/*		Worker worker = new Worker(signal); */
	rval_m_14 = main_Worker_init_(sp, i_val7, i_val6);
	if (rval_m_14 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_14;
	}
	/*		Worker worker = new Worker(signal); */
	sp--;
	worker = (int32)(*sp);
	/*		worker.register(); */
	i_val7 = worker;
	/*		worker.register(); */
	rval_m_20 = javax_safetycritical_AperiodicEventHandler_register(sp, i_val7);
	if (rval_m_20 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_20;
	}
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	if (handleNewClassIndex(sp, 92) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	i_val7 = *(sp - 1);
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	i_val6 = signal;
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	i_val5 = worker;
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	constant_ = &constants[96];
	data_ = (const unsigned char *) pgm_read_pointer(&constant_->data, const void **);
	msi = ((int32) pgm_read_byte(data_)) << 24;
	msi |= ((int32) pgm_read_byte(data_ +1)) << 16;
	msi |= pgm_read_byte(data_ + 2) << 8;
	msi |= pgm_read_byte(data_ + 3);
	lsi = ((int32) pgm_read_byte(data_ + 4)) << 24;
	lsi |= ((int32) pgm_read_byte(data_ + 5)) << 16;
	lsi |= pgm_read_byte(data_ + 6) << 8;
	lsi |= pgm_read_byte(data_ + 7);
	i_val4 = msi;
	i_val3 = lsi;
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	i_val2 = 0;
	i_val1 = 0;
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	rval_m_34 = main_Producer_init_(sp, i_val7, i_val6, i_val5, i_val4, i_val3, i_val2, i_val1);
	if (rval_m_34 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_34;
	}
	/*		(new Producer(signal, worker, 2000, 0)).register(); */
	sp--;
	hvm_arg_no_1_38 = (int32)(*sp);
	rval_m_38 = javax_safetycritical_PeriodicEventHandler_register(sp, hvm_arg_no_1_38);
	if (rval_m_38 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_38;
	}
	/*	} */
	return -1;
}
\end{lstlisting}

\section{\texorpdfstring{\texttt{Buffer}}{Buffer}}
\label{Buffer-code-section}


\subsection{Code generated by our prototype}
\label{Buffer-code-our-subsection}

\subsubsection{\texttt{Buffer.c}}
\lstinputlisting{Buffer.c}

\subsubsection{\texttt{Buffer.h}}
\lstinputlisting{Buffer.h}

% \subsection{Code generated by icecap}
% \label{Buffer-code-icecap-subsection}

% \subsubsection{\texttt{classes.c}}
% \lstinputlisting{Buffer_classes.c}

% \subsubsection{\texttt{classes.h}}
% \lstinputlisting{Buffer_classes.h}

% \subsubsection{\texttt{methods.c}}
% \lstinputlisting{Buffer_methods.c}

% \subsubsection{\texttt{methods.h}}
% \lstinputlisting{Buffer_methods.h}

\subsection{Comparison of program code}
\label{Buffer-code-comparison-subsection}

\subsubsection{\texttt{main\_Producer\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=224]
void main_Producer_init_Ljavax_safetycritical_AperiodicEventHandler_Lmain_Buffer__V(int32_t var1, int32_t var2, int32_t var3) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getNormPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_PeriodicParametersID);
	stack4 = stack3;
	stack5 = newObject(javax_realtime_RelativeTimeID);
	stack6 = stack5;
	javax_realtime_RelativeTime_init__V(stack6);
	stack6 = newObject(javax_realtime_RelativeTimeID);
	stack7 = stack6;
	stack8 = 0;
	stack9 = 3000;
	stack10 = 0;
	javax_realtime_RelativeTime_init_JI_V(stack7, stack8, stack9, stack10);
	javax_realtime_PeriodicParameters_init_Ljavax_realtime_RelativeTime_Ljavax_realtime_RelativeTime__V(stack4, stack5, stack6);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_PeriodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_PeriodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);
	stack1 = var1;
	stack2 = 5;
	((main_Producer *) ((uintptr_t)stack1))->MAX_NUM_OF_OBJECTSI = stack2;
	stack1 = var1;
	stack2 = 0;
	((main_Producer *) ((uintptr_t)stack1))->NUM_OF_OBJECTSI = stack2;
	stack1 = var1;
	stack2 = newObject(main_Producer1ID);
	stack3 = stack2;
	stack4 = var1;
	main_Producer1_init_Lmain_Producer__V(stack3, stack4);
	((main_Producer *) ((uintptr_t)stack1))->_switchLjava_lang_Runnable_ = stack2;
	stack1 = var1;
	stack2 = var3;
	((main_Producer *) ((uintptr_t)stack1))->bufferLmain_Buffer_ = stack2;
	stack1 = var1;
	stack2 = var2;
	((main_Producer *) ((uintptr_t)stack1))->consumeLjavax_safetycritical_AperiodicEventHandler_ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56455]
int16 main_Producer_init_(int32 *fp, int32 this, int32 consumer, int32 buffer)
{
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int16 rval_m_25;
	int32 msi;
	int32 lsi;
	const unsigned char *data_;
	const ConstantInfo* constant_;
	int32 i_val10;
	int32 i_val9;
	int16 rval_m_37;
	int32 hvm_arg_no_3_41;
	int32 hvm_arg_no_2_41;
	int32 hvm_arg_no_1_41;
	int16 rval_m_41;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_65;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_88;
	int16 rval_m_89;
	int32 hvm_arg_no_5_93;
	int32 hvm_arg_no_4_93;
	int32 hvm_arg_no_3_93;
	int32 hvm_arg_no_2_93;
	int32 hvm_arg_no_1_93;
	int16 rval_m_93;
	unsigned char* cobj;
	int16 rval_m_119;
	sp = &fp[5]; /* make room for local VM state on the stack */
	/*		super( */
	i_val12 = this;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	i_val12 = *(sp - 1);
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*)sp;
		i_val11 = rval_5;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getNormPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*)sp;
		i_val11 = rval_9;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	if (handleNewClassIndex(sp, 91) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	i_val12 = *(sp - 1);
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 134) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	i_val12 = *(sp - 1);
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	*sp = (int32)i_val12;
	sp++;
	sp -= 1;
	rval_m_25 = javax_realtime_RelativeTime_init_(sp);
	if (rval_m_25 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_25;
	}
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	if (handleNewClassIndex(sp, 134) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	i_val12 = *(sp - 1);
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	constant_ = &constants[97];
	data_ = (const unsigned char *) pgm_read_pointer(&constant_->data, const void **);
	msi = ((int32) pgm_read_byte(data_)) << 24;
	msi |= ((int32) pgm_read_byte(data_ +1)) << 16;
	msi |= pgm_read_byte(data_ + 2) << 8;
	msi |= pgm_read_byte(data_ + 3);
	lsi = ((int32) pgm_read_byte(data_ + 4)) << 24;
	lsi |= ((int32) pgm_read_byte(data_ + 5)) << 16;
	lsi |= pgm_read_byte(data_ + 6) << 8;
	lsi |= pgm_read_byte(data_ + 7);
	i_val11 = msi;
	i_val10 = lsi;
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	i_val9 = 0;
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	rval_m_37 = javax_realtime_RelativeTime_init__(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_37 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_37;
	}
	/*				new PeriodicParameters(new RelativeTime(), new RelativeTime(3000,0)), */
	sp--;
	hvm_arg_no_3_41 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_41 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_41 = (int32)(*sp);
	rval_m_41 = javax_realtime_PeriodicParameters_init_(sp, hvm_arg_no_1_41, hvm_arg_no_2_41, hvm_arg_no_3_41);
	if (rval_m_41 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_41;
	}
	/*				new StorageParameters( */
	if (handleNewClassIndex(sp, 64) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*				new StorageParameters( */
	rval_m_65 = javax_safetycritical_StorageParameters_init_(sp, i_val12, i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_65 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_65;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val12 = *(sp - 1);
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val11 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val10 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	s_val9 = 1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	_count_ = s_val9;
	narray = (Object*) createArray(48, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 76;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val8 = i_val9;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	b_val7 = 0;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_88 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_88[index_int8 << 1] = msb_int32;
	cobj_88[(index_int8 << 1) + 1] = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	rval_m_89 = javax_realtime_ConfigurationParameters_init_(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_89 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_89;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	sp--;
	hvm_arg_no_5_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_4_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_93 = (int32)(*sp);
	rval_m_93 = javax_safetycritical_PeriodicEventHandler_init_(sp, hvm_arg_no_1_93, hvm_arg_no_2_93, hvm_arg_no_3_93, hvm_arg_no_4_93, hvm_arg_no_5_93);
	if (rval_m_93 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_93;
	}
	/*	private final int MAX_NUM_OF_OBJECTS = 5; */
	i_val12 = this;
	/*	private final int MAX_NUM_OF_OBJECTS = 5; */
	i_val11 = 5;
	/*	private final int MAX_NUM_OF_OBJECTS = 5; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> MAX_NUM_OF_OBJECTS_f = lsb_int32;
	/*	private int NUM_OF_OBJECTS = 0; */
	i_val12 = this;
	/*	private int NUM_OF_OBJECTS = 0; */
	i_val11 = 0;
	/*	private int NUM_OF_OBJECTS = 0; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> NUM_OF_OBJECTS_f = lsb_int32;
	/*	private Runnable _switch = new Runnable(){ */
	i_val12 = this;
	/*	private Runnable _switch = new Runnable(){ */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 156) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*	private Runnable _switch = new Runnable(){ */
	i_val12 = *(sp - 1);
	/*	private Runnable _switch = new Runnable(){ */
	i_val11 = this;
	/*	private Runnable _switch = new Runnable(){ */
	rval_m_119 = main_Producer_1_init_(sp, i_val12, i_val11);
	if (rval_m_119 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_119;
	}
	/*	private Runnable _switch = new Runnable(){ */
	sp--;
	lsb_int32 = (int32)(*sp);
	sp--;
	cobj = (unsigned char *) (pointer) *sp;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _switch_f = lsb_int32;
	/*		this.buffer = buffer; */
	i_val12 = this;
	/*		this.buffer = buffer; */
	i_val11 = buffer;
	/*		this.buffer = buffer; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> buffer_f = lsb_int32;
	/*		this.consume = consumer; */
	i_val12 = this;
	/*		this.consume = consumer; */
	i_val11 = consumer;
	/*		this.consume = consumer; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> consume_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[544], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_globalBackingStoreSize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=327]
void main_MySafelet_globalBackingStoreSize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 0;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_Producer1\_run}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=369]
void main_Producer1_run__V(int32_t var1) {
	int32_t stack1, stack2, stack3;
	stack1 = var1;
	stack1 = ((main_Producer1 *)  ((uintptr_t)stack1))->this0Lmain_Producer_;
	stack2 = newObject(java_lang_ObjectID);
	stack3 = stack2;
	java_lang_Object_init__V(stack3);
	main_Producer_access0_Lmain_Producer_Ljava_lang_Object__V(stack1, stack2);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56400]
int16 main_Producer_1_run(int32 *fp) {
	int32* sp;
	int32 i_val2;
	unsigned char* cobj;
	int16 rval_m_11;
	int16 rval_m_15;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*			Producer.this.data = new Object(); */
	i_val2 = this;
	/*			Producer.this.data = new Object(); */
	cobj = (unsigned char *) (pointer) i_val2;
	i_val2 = ((struct _main_Producer_1_c *)HEAP_REF(cobj, void*)) -> this_0_f;
	/*			Producer.this.data = new Object(); */
	*sp = (int32) i_val2;
	sp++;
	if (handleNewClassIndex(sp, 153) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			Producer.this.data = new Object(); */
	i_val2 = *(sp - 1);
	/*			Producer.this.data = new Object(); */
	*sp = (int32) i_val2;
	sp++;
	sp -= 1;
	rval_m_11 = java_lang_Object_init_(sp);
	if (rval_m_11 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_11;
	}
	/*			Producer.this.data = new Object(); */
	sp -= 2;
	rval_m_15 = main_Producer_access_0(sp);
	if (rval_m_15 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_15;
	}
	/*		}		 */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_Consumer\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=380]
void main_Consumer_handleAsyncEvent__V(int32_t var1) {
	int32_t var2;
	int32_t stack1;
	stack1 = var1;
	stack1 = ((main_Consumer *)  ((uintptr_t)stack1))->bufferLmain_Buffer_;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_BoundedBufferID) {
		takeLock(stack1);
		main_BoundedBuffer_get__Ljava_lang_Object_(stack1, &stack1);
	}
	var2 = stack1;
	stack1 = var2;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_MainSequenceID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ProducerID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray5ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray4ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_safetycritical_io_ConsoleInputID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray1ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray3ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_realtime_AperiodicParametersID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray2ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_MainMissionID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_Producer1ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_io_DataOutputStreamID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_realtime_PeriodicParametersID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array3ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array2ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array1ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_realtime_ConfigurationParametersID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_realtime_RelativeTimeID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_safetycritical_io_ConsoleConnectionID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_io_DataInputStreamID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ConsumerID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_LongArray1ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_safetycritical_PrioritySchedulerID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_BoundedBufferID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_realtime_memory_ScopeParametersID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array5ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array4ID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_safetycritical_io_ConsoleOutputID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_ObjectID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == javax_realtime_PriorityParametersID) {
		java_lang_Object_hashCode__I(stack1, &stack1);
	}
	devices_Console_write_I_V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55679]
int16 main_Consumer_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val0;
	unsigned char* cobj;
	unsigned short classIndex;
	unsigned short methodIndex;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_7;
	int32 rval_7;
	unsigned char methodVtableIndex;
	int16 rval_m_19;
	Object* i_obj;
	int32 hvm_arg_no_1_44;
	int16 rval_m_44;
	int32 data;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		Object data = buffer.get(); */
	i_val0 = this;
	/*		Object data = buffer.get(); */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_Consumer_c *)HEAP_REF(cobj, void*)) -> buffer_f;
	/*		Object data = buffer.get(); */
	if (i_val0 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 7;
#endif
		goto throwNullPointer;
	}
	classIndex = getClassIndex((Object *)(pointer)i_val0);
	methodIndex = (unsigned short)-1;
	while (methodIndex == (unsigned short)-1) {
		switch (classIndex) {
			case 126:
			handleMonitorEnterExit((Object*)(pointer)i_val0, 1, sp, "");
			rval_m_7 = main_BoundedBuffer_get(sp, i_val0);
			methodIndex = 528;
			continue;
		}
		classIndex = pgm_read_word(&classes[classIndex].superClass);
	}
	if (rval_m_7 == -1) {
		rval_7 = *(int32*)sp;
		i_val0 = rval_7;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_7;
	}
	/*		Object data = buffer.get(); */
	data = i_val0;
	/*		devices.Console.println(data.hashCode()); */
	i_val0 = data;
	/*		devices.Console.println(data.hashCode()); */
	*sp = (int32)i_val0;
	sp++;
	sp -= 1;
	i_obj = (Object*) (pointer) *sp;
	if (i_obj == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 19;
#endif
		goto throwNullPointer;
	}
	classIndex = getClassIndex(i_obj);
	methodIndex = (unsigned short)-1;
	while (methodIndex == (unsigned short)-1) {
		switch (classIndex) {
			case 153:
			methodIndex = 72;
			continue;
			case 60:
			methodIndex = 96;
			continue;
			case 99:
			methodIndex = 172;
			continue;
			case 117:
			methodIndex = 221;
			continue;
			case 107:
			methodIndex = 40;
			continue;
		}
		classIndex = pgm_read_word(&classes[classIndex].superClass);
	}
	rval_m_19 = dispatchInterface(methodIndex, &methodVtableIndex, sp);
	if (rval_m_19 == -1) {
		sp += methodVtableIndex;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_19;
	}
	/*		devices.Console.println(data.hashCode()); */
	sp--;
	hvm_arg_no_1_44 = (int32)(*sp);
	rval_m_44 = devices_Console_println(sp, hvm_arg_no_1_44);
	if (rval_m_44 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_44;
	}
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[532], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_Producer\_access0}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=603]
void main_Producer_access0_Lmain_Producer_Ljava_lang_Object__V(int32_t var1, int32_t var2) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack2 = var2;
	((main_Producer *) ((uintptr_t)stack1))->dataLjava_lang_Object_ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56853]
int16 main_Producer_access_0(int32 *fp) {
	int32* sp;
	int32 i_val1;
	int32 i_val0;
	unsigned char* cobj;
	int32 lsb_int32;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int32 lv_0 = 0;
	int32 lv_1 = 0;
	lv_0 = (int32)(*(fp + 0));
	lv_1 = (int32)(*(fp + 1));
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*	private Object data; */
	i_val1 = lv_0;
	/*	private Object data; */
	i_val0 = lv_1;
	/*	private Object data; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	if (cobj == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 2;
#endif
		goto throwNullPointer;
	}
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> data_f = lsb_int32;
	/*	private Object data; */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[545], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_cleanUp}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=749]
void main_MySafelet_cleanUp__V(int32_t var1) {
	
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method

\subsubsection{\texttt{main\_BoundedBuffer\_put}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=888]
void main_BoundedBuffer_put_Ljava_lang_Object__V(int32_t var1, int32_t var2) {
	int32_t stack1, stack2, stack3;
	stack1 = var1;
	stack1 = ((main_BoundedBuffer *)  ((uintptr_t)stack1))->storedI;
	stack2 = var1;
	stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->maxI;
	if (stack1 != stack2) {
		stack1 = var1;
		stack2 = var1;
		stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->lastI;
		stack3 = 1;
		stack2 = stack3 + stack2;
		stack3 = var1;
		stack3 = ((main_BoundedBuffer *)  ((uintptr_t)stack3))->maxI;
		stack2 = stack3 % stack2;
		((main_BoundedBuffer *) ((uintptr_t)stack1))->lastI = stack2;
		stack1 = var1;
		stack2 = stack1;
		stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->storedI;
		stack3 = 1;
		stack2 = stack3 + stack2;
		((main_BoundedBuffer *) ((uintptr_t)stack1))->storedI = stack2;
		stack1 = var1;
		stack1 = ((main_BoundedBuffer *)  ((uintptr_t)stack1))->dataLjava_lang_Array_;
		stack2 = var1;
		stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->lastI;
		stack3 = var2;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array3ID) {
			java_lang_Array3_store_ILjava_lang_Object__V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array2ID) {
			java_lang_Array2_store_ILjava_lang_Object__V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array1ID) {
			java_lang_Array1_store_ILjava_lang_Object__V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array5ID) {
			java_lang_Array5_store_ILjava_lang_Object__V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array4ID) {
			java_lang_Array4_store_ILjava_lang_Object__V(stack1, stack2, stack3);
		}
		releaseLock(var1);
	} else {
		releaseLock(var1);
	}
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55202]
int16 main_BoundedBuffer_put(int32 *fp, int32 this, int32 item)
{
	int32* sp;
	int32 i_val2;
	unsigned char* cobj;
	int32 i_val1;
	int8 b_val0;
	int8 msb_int8;
	int32 lsb_int32;
	int32 i_val0;
	int32 res_int32;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int32 index_int32;
	uint32* cobj_75;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*                if ( this.stored == this.max ) return;   */
	i_val2 = this;
	/*                if ( this.stored == this.max ) return;   */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f;
	/*                if ( this.stored == this.max ) return;   */
	i_val1 = this;
	/*                if ( this.stored == this.max ) return;   */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> max_f;
	/*                if ( this.stored == this.max ) return;   */
	if (i_val2 != i_val1) {
		goto L20;
	}
	/*                if ( this.stored == this.max ) return;   */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return -1;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	L20:
	i_val2 = this;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	i_val1 = this;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> last_f;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	b_val0 = 1;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	msb_int8 = b_val0;
	lsb_int32 = i_val1;
	lsb_int32 += msb_int8;
	i_val1 = lsb_int32;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	i_val0 = this;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> max_f;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	res_int32 = i_val0;
	lsb_int32 = i_val1;
	if (res_int32 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 37;
#endif
		goto throwArithmeticException;
	}
#if defined(GLIBC_DOES_NOT_SUPPORT_MUL)
	res_int32 = imod(res_int32, lsb_int32);
#else
	res_int32 = lsb_int32 % res_int32;
#endif
	i_val1 = res_int32;
	/*                this.last = ( this.last + 1 ) % this.max;  */
	lsb_int32 = i_val1;
	cobj = (unsigned char *) (pointer)i_val2;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> last_f = lsb_int32;
	/*                this.stored++; */
	i_val2 = this;
	/*                this.stored++; */
	i_val1 = i_val2;
	/*                this.stored++; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f;
	/*                this.stored++; */
	b_val0 = 1;
	/*                this.stored++; */
	msb_int8 = b_val0;
	lsb_int32 = i_val1;
	lsb_int32 += msb_int8;
	i_val1 = lsb_int32;
	/*                this.stored++; */
	lsb_int32 = i_val1;
	cobj = (unsigned char *) (pointer)i_val2;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f = lsb_int32;
	/*                this.data[last] = item; */
	i_val2 = this;
	/*                this.data[last] = item; */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> data_f;
	/*                this.data[last] = item; */
	i_val1 = this;
	/*                this.data[last] = item; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> last_f;
	/*                this.data[last] = item; */
	i_val0 = item;
	/*                this.data[last] = item; */
	lsb_int32 = i_val0;
	index_int32 = i_val1;
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 75;
#endif
		goto throwNullPointer;
	}
	cobj_75 = HEAP_REF((pointer)(i_val2 + sizeof(Object) + 2), uint32*);
	cobj_75[index_int32] = lsb_int32;
	/*        }	 */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return -1;
	throwArithmeticException:
	excep = initializeException(sp, JAVA_LANG_ARITHMETICEXCEPTION, JAVA_LANG_ARITHMETICEXCEPTION_INIT_);
	goto throwIt;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[529], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_Producer1\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1318]
void main_Producer1_init_Lmain_Producer__V(int32_t var1, int32_t var2) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack2 = var2;
	((main_Producer1 *) ((uintptr_t)stack1))->this0Lmain_Producer_ = stack2;
	stack1 = var1;
	java_lang_Object_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56358]
int16 main_Producer_1_init_(int32 *fp, int32 this, int32 lv_1)
{
	int32* sp;
	int32 i_val1;
	int32 i_val0;
	unsigned char* cobj;
	int32 lsb_int32;
	int16 rval_m_9;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*package main; */
	i_val1 = this;
	/*package main; */
	i_val0 = lv_1;
	/*package main; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer)i_val1;
	((struct _main_Producer_1_c *)HEAP_REF(cobj, void*)) -> this_0_f = lsb_int32;
	/*	private Runnable _switch = new Runnable(){ */
	i_val1 = this;
	/*	private Runnable _switch = new Runnable(){ */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_9 = java_lang_Object_init_(sp);
	if (rval_m_9 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	/*	private Runnable _switch = new Runnable(){ */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_handleStartupError}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1328]
void main_MySafelet_handleStartupError_IJ_Z(int32_t var1, int32_t var2, int32_t var3, int32_t var4, int32_t * retVal) {
	int32_t stack1;
	stack1 = 0;
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_MainMission\_missionMemorySize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1407]
void main_MainMission_missionMemorySize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 1000000;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_MainSequence\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1422]
void main_MainSequence_init__V(int32_t var1) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_memory_ScopeParametersID);
	stack4 = stack3;
	stack5 = 0;
	stack6 = 702000;
	stack7 = 0;
	stack8 = 20000;
	stack9 = 0;
	stack10 = 100000;
	stack11 = 0;
	stack12 = 200000;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12);
	stack4 = newObject(javax_realtime_ConfigurationParametersID);
	stack5 = stack4;
	stack6 = -1;
	stack7 = -1;
	stack8 = newObject(java_lang_LongArray1ID);
	stack9 = stack8;
	stack10 = 0;
	stack11 = 6144;
	java_lang_LongArray1_init_J_V(stack9, stack10, stack11);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack5, stack6, stack7, stack8);
	javax_safetycritical_MissionSequencer_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55976]
int16 main_MainSequence_init_(int32 *fp) {
	int32* sp;
	int32 i_val11;
	int16 rval_m_5;
	int32 i_val10;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int32 i_val3;
	int16 rval_m_49;
	int16 s_val8;
	Object* narray;
	uint16 _count_;
	int8 b_val6;
	int8 index_int8;
	uint32* cobj_72;
	int16 rval_m_73;
	int32 hvm_arg_no_4_77;
	int32 hvm_arg_no_3_77;
	int32 hvm_arg_no_2_77;
	int32 hvm_arg_no_1_77;
	int16 rval_m_77;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		super( new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val11 = this;
	/*		super( new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32) i_val11;
	sp++;
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*		super( new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val11 = *(sp - 1);
	/*		super( new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*) sp;
		i_val10 = rval_5;
	} else {
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*		super( new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val10 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val10);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*) sp;
		i_val10 = rval_9;
	} else {
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*		super( new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val11, i_val10);
	if (rval_m_13 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_13;
	}
	/*			   new StorageParameters( */
	if (handleNewClassIndex(sp, 64) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			   new StorageParameters( */
	i_val11 = *(sp - 1);
	/*					   Const.OUTERMOST_SEQ_BACKING_STORE, */
	i_val10 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> OUTERMOST_SEQ_BACKING_STORE_f;
	/*					   Const.OUTERMOST_SEQ_BACKING_STORE, */
	lsb_int32 = i_val10;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val10 = msb_int32;
	i_val9 = lsb_int32;
	/*					   Const.PRIVATE_MEM, */
	i_val8 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*					   Const.PRIVATE_MEM, */
	lsb_int32 = i_val8;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val8 = msb_int32;
	i_val7 = lsb_int32;
	/*					   Const.IMMORTAL_MEM, */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> IMMORTAL_MEM_f;
	/*					   Const.IMMORTAL_MEM, */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*					   Const.MISSION_MEM), */
	i_val4 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> MISSION_MEM_f;
	/*					   Const.MISSION_MEM), */
	lsb_int32 = i_val4;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val4 = msb_int32;
	i_val3 = lsb_int32;
	/*			   new StorageParameters( */
	rval_m_49 = javax_safetycritical_StorageParameters_init_(sp, i_val11,
			i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4, i_val3);
	if (rval_m_49 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_49;
	}
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	i_val11 = *(sp - 1);
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	i_val10 = -1;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	i_val9 = -1;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	s_val8 = 1;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	_count_ = s_val8;
	narray = (Object*) createArray(48, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 60;
#endif
		goto throwOutOfMemory;
	}
	i_val8 = (int32) (pointer) narray;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	i_val7 = i_val8;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	b_val6 = 0;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	i_val5 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	lsb_int32 = i_val5;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val5 = msb_int32;
	i_val4 = lsb_int32;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	lsb_int32 = i_val4;
	msb_int32 = i_val5;
	index_int8 = b_val6;
	cobj_72 = HEAP_REF((pointer)(i_val7 + sizeof(Object) + 2), uint32*);
	cobj_72[index_int8 << 1] = msb_int32;
	cobj_72[(index_int8 << 1) + 1] = lsb_int32;
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	rval_m_73 = javax_realtime_ConfigurationParameters_init_(sp, i_val11,
			i_val10, i_val9, i_val8);
	if (rval_m_73 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_73;
	}
	/*			   new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}) */
	sp--;
	hvm_arg_no_4_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_77 = (int32)(*sp);
	rval_m_77 = javax_safetycritical_MissionSequencer_init_(sp, hvm_arg_no_1_77,
			hvm_arg_no_2_77, hvm_arg_no_3_77, hvm_arg_no_4_77);
	if (rval_m_77 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_77;
	}
	/*	} */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory: excep = initializeException(sp,
			JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[536], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_Producer\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1676]
void main_Producer_handleAsyncEvent__V(int32_t var1) {
	int32_t stack1, stack2, stack3;
	stack1 = var1;
	stack1 = ((main_Producer *)  ((uintptr_t)stack1))->NUM_OF_OBJECTSI;
	stack2 = 5;
	if (stack1 > stack2) {
		
	} else {
		stack1 = var1;
		stack1 = ((main_Producer *)  ((uintptr_t)stack1))->_switchLjava_lang_Runnable_;
		javax_safetycritical_ManagedMemory_executeInOuterArea_Ljava_lang_Runnable__V(stack1);
		stack1 = var1;
		stack2 = stack1;
		stack2 = ((main_Producer *)  ((uintptr_t)stack2))->NUM_OF_OBJECTSI;
		stack3 = 1;
		stack2 = stack3 + stack2;
		((main_Producer *) ((uintptr_t)stack1))->NUM_OF_OBJECTSI = stack2;
		stack1 = var1;
		stack1 = ((main_Producer *)  ((uintptr_t)stack1))->bufferLmain_Buffer_;
		stack2 = var1;
		stack2 = ((main_Producer *)  ((uintptr_t)stack2))->dataLjava_lang_Object_;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_BoundedBufferID) {
			takeLock(stack1);
			main_BoundedBuffer_put_Ljava_lang_Object__V(stack1, stack2);
		}
		stack1 = var1;
		stack1 = ((main_Producer *)  ((uintptr_t)stack1))->consumeLjavax_safetycritical_AperiodicEventHandler_;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ConsumerID) {
			javax_safetycritical_AperiodicEventHandler_release__V(stack1);
		}

	}
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56910]
int16 main_Producer_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val2;
	unsigned char* cobj;
	int8 b_val1;
	int16 rval_m_18;
	int32 i_val1;
	int8 b_val0;
	int8 msb_int8;
	int32 lsb_int32;
	unsigned short classIndex;
	unsigned short methodIndex;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_52;
	int16 rval_m_69;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		if (NUM_OF_OBJECTS <= MAX_NUM_OF_OBJECTS) { */
	i_val2 = this;
	/*		if (NUM_OF_OBJECTS <= MAX_NUM_OF_OBJECTS) { */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> NUM_OF_OBJECTS_f;
	/*		if (NUM_OF_OBJECTS <= MAX_NUM_OF_OBJECTS) { */
	b_val1 = 5;
	/*		if (NUM_OF_OBJECTS <= MAX_NUM_OF_OBJECTS) { */
	if (i_val2 > b_val1) {
		goto L73;
	}
	/*				ManagedMemory.executeInOuterArea(this._switch); */
	i_val2 = this;
	/*				ManagedMemory.executeInOuterArea(this._switch); */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> _switch_f;
	/*				ManagedMemory.executeInOuterArea(this._switch); */
	rval_m_18 = javax_safetycritical_ManagedMemory_executeInOuterArea(sp, i_val2);
	if (rval_m_18 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_18;
	}
	/*			NUM_OF_OBJECTS++; */
	i_val2 = this;
	/*			NUM_OF_OBJECTS++; */
	i_val1 = i_val2;
	/*			NUM_OF_OBJECTS++; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> NUM_OF_OBJECTS_f;
	/*			NUM_OF_OBJECTS++; */
	b_val0 = 1;
	/*			NUM_OF_OBJECTS++; */
	msb_int8 = b_val0;
	lsb_int32 = i_val1;
	lsb_int32 += msb_int8;
	i_val1 = lsb_int32;
	/*			NUM_OF_OBJECTS++; */
	lsb_int32 = i_val1;
	cobj = (unsigned char *) (pointer)i_val2;
	((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> NUM_OF_OBJECTS_f = lsb_int32;
	/*			this.buffer.put(data); */
	i_val2 = this;
	/*			this.buffer.put(data); */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> buffer_f;
	/*			this.buffer.put(data); */
	i_val1 = this;
	/*			this.buffer.put(data); */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> data_f;
	/*			this.buffer.put(data); */
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 52;
#endif
		goto throwNullPointer;
	}
	classIndex = getClassIndex((Object *)(pointer)i_val2);
	methodIndex = (unsigned short)-1;
	while (methodIndex == (unsigned short)-1) {
		switch (classIndex) {
			case 126:
			handleMonitorEnterExit((Object*)(pointer)i_val2, 1, sp, "");
			rval_m_52 = main_BoundedBuffer_put(sp, i_val2, i_val1);
			methodIndex = 529;
			continue;
		}
		classIndex = pgm_read_word(&classes[classIndex].superClass);
	}
	if (rval_m_52 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_52;
	}
	/*			this.consume.release();			 */
	i_val2 = this;
	/*			this.consume.release();			 */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Producer_c *)HEAP_REF(cobj, void*)) -> consume_f;
	/*			this.consume.release();			 */
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 69;
#endif
		goto throwNullPointer;
	}
	rval_m_69 = javax_safetycritical_AperiodicEventHandler_release(sp, i_val2);
	if (rval_m_69 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_69;
	}
	/*	} */
	L73:
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[546], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_getSequencer}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1710]
void main_MySafelet_getSequencer__Ljavax_safetycritical_MissionSequencer_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = newObject(main_MainSequenceID);
	stack2 = stack1;
	main_MainSequence_init__V(stack2);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56307]
int16 main_MySafelet_getSequencer(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_4;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		return new MainSequence(); */
	if (handleNewClassIndex(sp, 110) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		return new MainSequence(); */
	i_val1 = *(sp - 1);
	/*		return new MainSequence(); */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_4 = main_MainSequence_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		return new MainSequence(); */
	sp--;
	*((int32*)fp) = (int32)(*sp);
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_BoundedBuffer\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1763]
void main_BoundedBuffer_init__V(int32_t var1) {
	int32_t stack1, stack2;
	stack1 = var1;
	java_lang_Object_init__V(stack1);
	stack1 = var1;
	stack2 = 5;
	((main_BoundedBuffer *) ((uintptr_t)stack1))->maxI = stack2;
	stack1 = var1;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack2);
	if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack2, &stack2);
	}
	javax_safetycritical_Services_setCeiling_Ljava_lang_Object_I_V(stack1, stack2);
	stack1 = var1;
	stack2 = var1;
	stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->maxI;
	java_lang_Array_newArray_I_Ljava_lang_Array_(stack2, &stack2);
	((main_BoundedBuffer *) ((uintptr_t)stack1))->dataLjava_lang_Array_ = stack2;
	stack1 = var1;
	stack2 = 0;
	((main_BoundedBuffer *) ((uintptr_t)stack1))->firstI = stack2;
	stack1 = var1;
	stack2 = 0;
	((main_BoundedBuffer *) ((uintptr_t)stack1))->lastI = stack2;
	stack1 = var1;
	stack2 = 0;
	((main_BoundedBuffer *) ((uintptr_t)stack1))->storedI = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54903]
int16 main_BoundedBuffer_init_(int32 *fp) {
	int32* sp;
	int32 i_val1;
	int16 rval_m_1;
	int32 i_val0;
	unsigned char* cobj;
	int32 lsb_int32;
	int16 rval_m_14;
	int32 rval_14;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_18;
	int32 rval_18;
	int16 rval_m_22;
	Object* narray;
	uint16 _count_;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*	public BoundedBuffer() { */
	i_val1 = this;
	/*	public BoundedBuffer() { */
	*sp = (int32) i_val1;
	sp++;
	sp -= 1;
	rval_m_1 = java_lang_Object_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*	private int max = 5; */
	i_val1 = this;
	/*	private int max = 5; */
	i_val0 = 5;
	/*	private int max = 5; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> max_f = lsb_int32;
	/*		Services.setCeiling(this, */
	i_val1 = this;
	/*					PriorityScheduler.instance().getMaxPriority()); */
	sp += 1;
	rval_m_14 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_14 == -1) {
		rval_14 = *(int32*) sp;
		i_val0 = rval_14;
	} else {
		fp[0] = *sp;
		return rval_m_14;
	}
	sp -= 1;
	/*					PriorityScheduler.instance().getMaxPriority()); */
	if (i_val0 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 18;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_18 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val0);
	if (rval_m_18 == -1) {
		rval_18 = *(int32*) sp;
		i_val0 = rval_18;
	} else {
		fp[0] = *sp;
		return rval_m_18;
	}
	sp -= 1;
	/*		Services.setCeiling(this, */
	rval_m_22 = javax_safetycritical_Services_setCeiling(sp, i_val1, i_val0);
	if (rval_m_22 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_22;
	}
	/*        this.data = new Object[ this.max ]; */
	i_val1 = this;
	/*        this.data = new Object[ this.max ]; */
	i_val0 = this;
	/*        this.data = new Object[ this.max ]; */
	cobj = (unsigned char *) (pointer) i_val0;
	i_val0 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> max_f;
	/*        this.data = new Object[ this.max ]; */
	_count_ = i_val0;
	narray = (Object*) createArray(81, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 34;
#endif
		goto throwOutOfMemory;
	}
	i_val0 = (int32) (pointer) narray;
	/*        this.data = new Object[ this.max ]; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> data_f = lsb_int32;
	/*        this.first = 0; */
	i_val1 = this;
	/*        this.first = 0; */
	i_val0 = 0;
	/*        this.first = 0; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> first_f = lsb_int32;
	/*        this.last = 0; */
	i_val1 = this;
	/*        this.last = 0; */
	i_val0 = 0;
	/*        this.last = 0; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> last_f = lsb_int32;
	/*        this.stored = 0; */
	i_val1 = this;
	/*        this.stored = 0; */
	i_val0 = 0;
	/*        this.stored = 0; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer) i_val1;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f = lsb_int32;
	/*    } */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory: excep = initializeException(sp,
			JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[527], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_BoundedBuffer\_isFull}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1820]
void main_BoundedBuffer_isFull__Z(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack1 = ((main_BoundedBuffer *)  ((uintptr_t)stack1))->storedI;
	stack2 = var1;
	stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->maxI;
	if (stack1 != stack2) {
		stack1 = 0;
		releaseLock(var1);
	} else {
		stack1 = 1;
		releaseLock(var1);
	}
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.

\subsubsection{\texttt{main\_MainMission\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1871]
void main_MainMission_init__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	javax_safetycritical_Mission_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55827]
int16 main_MainMission_init_(int32 *fp) {
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*public class MainMission extends Mission { */
	i_val0 = this;
	/*public class MainMission extends Mission { */
	*sp = (int32) i_val0;
	sp++;
	sp -= 1;
	rval_m_1 = javax_safetycritical_Mission_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*public class MainMission extends Mission { */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MainSequence\_getNextMission}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1983]
void main_MainSequence_getNextMission__Ljavax_safetycritical_Mission_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = newObject(main_MainMissionID);
	stack2 = stack1;
	main_MainMission_init__V(stack2);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56227]
int16 main_MainSequence_getNextMission(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_4;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		return new MainMission();   */
	if (handleNewClassIndex(sp, 72) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		return new MainMission();   */
	i_val1 = *(sp - 1);
	/*		return new MainMission();   */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_4 = main_MainMission_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		return new MainMission();   */
	sp--;
	*((int32*)fp) = (int32)(*sp);
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2084]
void main_MySafelet_init__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	java_lang_Object_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56276]
int16 main_MySafelet_init_(int32 *fp) {
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*public class MySafelet implements Safelet { */
	i_val0 = this;
	/*public class MySafelet implements Safelet { */
	*sp = (int32) i_val0;
	sp++;
	sp -= 1;
	rval_m_1 = java_lang_Object_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*public class MySafelet implements Safelet { */
	return -1;
}
\end{lstlisting}

\subsubsection{\texttt{main\_BoundedBuffer\_get}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2180]
void main_BoundedBuffer_get__Ljava_lang_Object_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2, stack3;
	stack1 = var1;
	stack1 = ((main_BoundedBuffer *)  ((uintptr_t)stack1))->storedI;
	if (stack1 != 0) {
		stack1 = var1;
		stack2 = var1;
		stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->firstI;
		stack3 = 1;
		stack2 = stack3 + stack2;
		stack3 = var1;
		stack3 = ((main_BoundedBuffer *)  ((uintptr_t)stack3))->maxI;
		stack2 = stack3 % stack2;
		((main_BoundedBuffer *) ((uintptr_t)stack1))->firstI = stack2;
		stack1 = var1;
		stack2 = stack1;
		stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->storedI;
		stack3 = 1;
		stack2 = stack3 - stack2;
		((main_BoundedBuffer *) ((uintptr_t)stack1))->storedI = stack2;
		stack1 = var1;
		stack1 = ((main_BoundedBuffer *)  ((uintptr_t)stack1))->dataLjava_lang_Array_;
		stack2 = var1;
		stack2 = ((main_BoundedBuffer *)  ((uintptr_t)stack2))->firstI;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array3ID) {
			java_lang_Array3_load_I_Ljava_lang_Object_(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array2ID) {
			java_lang_Array2_load_I_Ljava_lang_Object_(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array1ID) {
			java_lang_Array1_load_I_Ljava_lang_Object_(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array5ID) {
			java_lang_Array5_load_I_Ljava_lang_Object_(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_Array4ID) {
			java_lang_Array4_load_I_Ljava_lang_Object_(stack1, stack2, &stack1);
		}
		releaseLock(var1);
	} else {
		stack1 = 0;
		releaseLock(var1);
	}
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55060]
int16 main_BoundedBuffer_get(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val2;
	unsigned char* cobj;
	int32 i_val1;
	int8 b_val0;
	int8 msb_int8;
	int32 lsb_int32;
	int32 i_val0;
	int32 res_int32;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int32 index_int32;
	uint32* cobj_68;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*                if ( this.stored == 0 ) return null; */
	i_val2 = this;
	/*                if ( this.stored == 0 ) return null; */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f;
	/*                if ( this.stored == 0 ) return null; */
	if (i_val2 != 0) {
		goto L14;
	}
	/*                if ( this.stored == 0 ) return null; */
	i_val2 = 0;
	/*                if ( this.stored == 0 ) return null; */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	*((int32*)fp) = i_val2;
	return -1;
	/*                this.first = (this.first + 1) % this.max; */
	L14:
	i_val2 = this;
	/*                this.first = (this.first + 1) % this.max; */
	i_val1 = this;
	/*                this.first = (this.first + 1) % this.max; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> first_f;
	/*                this.first = (this.first + 1) % this.max; */
	b_val0 = 1;
	/*                this.first = (this.first + 1) % this.max; */
	msb_int8 = b_val0;
	lsb_int32 = i_val1;
	lsb_int32 += msb_int8;
	i_val1 = lsb_int32;
	/*                this.first = (this.first + 1) % this.max; */
	i_val0 = this;
	/*                this.first = (this.first + 1) % this.max; */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> max_f;
	/*                this.first = (this.first + 1) % this.max; */
	res_int32 = i_val0;
	lsb_int32 = i_val1;
	if (res_int32 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 31;
#endif
		goto throwArithmeticException;
	}
#if defined(GLIBC_DOES_NOT_SUPPORT_MUL)
	res_int32 = imod(res_int32, lsb_int32);
#else
	res_int32 = lsb_int32 % res_int32;
#endif
	i_val1 = res_int32;
	/*                this.first = (this.first + 1) % this.max; */
	lsb_int32 = i_val1;
	cobj = (unsigned char *) (pointer)i_val2;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> first_f = lsb_int32;
	/*                this.stored--; */
	i_val2 = this;
	/*                this.stored--; */
	i_val1 = i_val2;
	/*                this.stored--; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f;
	/*                this.stored--; */
	b_val0 = 1;
	/*                this.stored--; */
	msb_int8 = b_val0;
	lsb_int32 = i_val1;
	lsb_int32 -= msb_int8;
	i_val1 = lsb_int32;
	/*                this.stored--; */
	lsb_int32 = i_val1;
	cobj = (unsigned char *) (pointer)i_val2;
	((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> stored_f = lsb_int32;
	/*                return this.data[first];  */
	i_val2 = this;
	/*                return this.data[first];  */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> data_f;
	/*                return this.data[first];  */
	i_val1 = this;
	/*                return this.data[first];  */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_BoundedBuffer_c *)HEAP_REF(cobj, void*)) -> first_f;
	/*                return this.data[first];  */
	index_int32 = i_val1;
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 68;
#endif
		goto throwNullPointer;
	}
	cobj_68 = HEAP_REF((pointer)(i_val2 + sizeof(Object) + 2), uint32*);
	i_val2 = cobj_68[index_int32];
	/*                return this.data[first];  */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	*((int32*)fp) = i_val2;
	return -1;
	throwArithmeticException:
	excep = initializeException(sp, JAVA_LANG_ARITHMETICEXCEPTION, JAVA_LANG_ARITHMETICEXCEPTION_INIT_);
	goto throwIt;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[528], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

\subsubsection{\texttt{main\_MySafelet\_initializeApplication}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2341]
void main_MySafelet_initializeApplication__V(int32_t var1) {
	
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56346]
int16 main_MySafelet_initializeApplication(int32 *fp, int32 this)
{
	/*	} */
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_Consumer\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2426]
void main_Consumer_init_Lmain_Buffer__V(int32_t var1, int32_t var2) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_AperiodicParametersID);
	stack4 = stack3;
	javax_realtime_AperiodicParameters_init__V(stack4);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_AperiodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_AperiodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);
	stack1 = var1;
	stack2 = var2;
	((main_Consumer *) ((uintptr_t)stack1))->bufferLmain_Buffer_ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55404]
int16 main_Consumer_init_(int32 *fp, int32 this, int32 buffer)
{
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int16 rval_m_21;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val10;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_45;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_68;
	int16 rval_m_69;
	int32 hvm_arg_no_5_73;
	int32 hvm_arg_no_4_73;
	int32 hvm_arg_no_3_73;
	int32 hvm_arg_no_2_73;
	int32 hvm_arg_no_1_73;
	int16 rval_m_73;
	unsigned char* cobj;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		super(//priority */
	i_val12 = this;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val12 = *(sp - 1);
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*)sp;
		i_val11 = rval_5;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*)sp;
		i_val11 = rval_9;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*			  new AperiodicParameters(), */
	if (handleNewClassIndex(sp, 104) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new AperiodicParameters(), */
	i_val12 = *(sp - 1);
	/*			  new AperiodicParameters(), */
	*sp = (int32)i_val12;
	sp++;
	sp -= 1;
	rval_m_21 = javax_realtime_AperiodicParameters_init_(sp);
	if (rval_m_21 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_21;
	}
	/*			  new StorageParameters( */
	if (handleNewClassIndex(sp, 64) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*			  new StorageParameters( */
	rval_m_45 = javax_safetycritical_StorageParameters_init_(sp, i_val12, i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_45 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_45;
	}
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val12 = *(sp - 1);
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val11 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val10 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	s_val9 = 1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	_count_ = s_val9;
	narray = (Object*) createArray(48, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 56;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val8 = i_val9;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	b_val7 = 0;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_68 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_68[index_int8 << 1] = msb_int32;
	cobj_68[(index_int8 << 1) + 1] = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	rval_m_69 = javax_realtime_ConfigurationParameters_init_(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_69 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_69;
	}
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	sp--;
	hvm_arg_no_5_73 = (int32)(*sp);
	sp--;
	hvm_arg_no_4_73 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_73 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_73 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_73 = (int32)(*sp);
	rval_m_73 = javax_safetycritical_AperiodicEventHandler_init_(sp, hvm_arg_no_1_73, hvm_arg_no_2_73, hvm_arg_no_3_73, hvm_arg_no_4_73, hvm_arg_no_5_73);
	if (rval_m_73 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_73;
	}
	/*		this.buffer = buffer; */
	i_val12 = this;
	/*		this.buffer = buffer; */
	i_val11 = buffer;
	/*		this.buffer = buffer; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Consumer_c *)HEAP_REF(cobj, void*)) -> buffer_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[531], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MySafelet\_immortalMemorySize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2477]
void main_MySafelet_immortalMemorySize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 0;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.


\subsubsection{\texttt{main\_MainMission\_initialize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2505]
void main_MainMission_initialize__V(int32_t var1) {
	int32_t var2, var3;
	int32_t stack1, stack2, stack3, stack4;
	stack1 = newObject(main_BoundedBufferID);
	stack2 = stack1;
	main_BoundedBuffer_init__V(stack2);
	var2 = stack1;
	stack1 = newObject(main_ConsumerID);
	stack2 = stack1;
	stack3 = var2;
	main_Consumer_init_Lmain_Buffer__V(stack2, stack3);
	var3 = stack1;
	stack1 = var3;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ConsumerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}
	stack1 = newObject(main_ProducerID);
	stack2 = stack1;
	stack3 = var3;
	stack4 = var2;
	main_Producer_init_Ljavax_safetycritical_AperiodicEventHandler_Lmain_Buffer__V(stack2, stack3, stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ProducerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55858]
int16 main_MainMission_initialize(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val3;
	int16 rval_m_4;
	int32 i_val2;
	int16 rval_m_14;
	int16 rval_m_20;
	int32 i_val1;
	int16 rval_m_30;
	int32 hvm_arg_no_1_34;
	int16 rval_m_34;
	int32 buffer;
	int32 consumer;
	sp = &fp[5]; /* make room for local VM state on the stack */
	/*		Buffer buffer = new BoundedBuffer(); */
	if (handleNewClassIndex(sp, 126) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		Buffer buffer = new BoundedBuffer(); */
	i_val3 = *(sp - 1);
	/*		Buffer buffer = new BoundedBuffer(); */
	*sp = (int32)i_val3;
	sp++;
	sp -= 1;
	rval_m_4 = main_BoundedBuffer_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		Buffer buffer = new BoundedBuffer(); */
	sp--;
	buffer = (int32)(*sp);
	/*		Consumer consumer = new Consumer(buffer); */
	if (handleNewClassIndex(sp, 78) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		Consumer consumer = new Consumer(buffer); */
	i_val3 = *(sp - 1);
	/*		Consumer consumer = new Consumer(buffer); */
	i_val2 = buffer;
	/*		Consumer consumer = new Consumer(buffer); */
	rval_m_14 = main_Consumer_init_(sp, i_val3, i_val2);
	if (rval_m_14 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_14;
	}
	/*		Consumer consumer = new Consumer(buffer); */
	sp--;
	consumer = (int32)(*sp);
	/*		consumer.register(); */
	i_val3 = consumer;
	/*		consumer.register(); */
	rval_m_20 = javax_safetycritical_AperiodicEventHandler_register(sp, i_val3);
	if (rval_m_20 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_20;
	}
	/*		(new Producer(consumer,buffer)).register(); */
	if (handleNewClassIndex(sp, 92) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		(new Producer(consumer,buffer)).register(); */
	i_val3 = *(sp - 1);
	/*		(new Producer(consumer,buffer)).register(); */
	i_val2 = consumer;
	/*		(new Producer(consumer,buffer)).register(); */
	i_val1 = buffer;
	/*		(new Producer(consumer,buffer)).register(); */
	rval_m_30 = main_Producer_init_(sp, i_val3, i_val2, i_val1);
	if (rval_m_30 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_30;
	}
	/*		(new Producer(consumer,buffer)).register(); */
	sp--;
	hvm_arg_no_1_34 = (int32)(*sp);
	rval_m_34 = javax_safetycritical_PeriodicEventHandler_register(sp, hvm_arg_no_1_34);
	if (rval_m_34 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_34;
	}
	/*	} */
	return -1;
}
\end{lstlisting}


\section{\texorpdfstring{\texttt{Barrier}}{Barrier}}
\label{Barrier-code-section}

\subsection{Code generated by our prototype}
\label{Barrier-code-our-subsection}

\subsubsection{\texttt{Barrier.c}}
\lstinputlisting{Barrier.c}

\subsubsection{\texttt{Barrier.h}}
\lstinputlisting{Barrier.h}

% \subsection{Code generated by icecap}
% \label{Barrier-code-icecap-subsection}

% \subsubsection{\texttt{classes.c}}
% \lstinputlisting{Barrier_classes.c}

% \subsubsection{\texttt{classes.h}}
% \lstinputlisting{Barrier_classes.h}

% \subsubsection{\texttt{methods.c}}
% \lstinputlisting{Barrier_methods.c}

% \subsubsection{\texttt{methods.h}}
% \lstinputlisting{Barrier_methods.h}

\subsection{Comparison of program code}
\label{Barrier-code-comparison-subsection}

\subsubsection{\texttt{main\_MySafelet\_globalBackingStoreSize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=262]
void main_MySafelet_globalBackingStoreSize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 0;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.


\subsubsection{\texttt{main\_LaunchHandler\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=465]
void main_LaunchHandler_handleAsyncEvent__V(int32_t var1) {
	int32_t stack1;
	stack1 = -1;
	devices_Console_write_I_V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55651]
int16 main_LaunchHandler_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		devices.Console.println(-1); */
	i_val0 = -1;
	/*		devices.Console.println(-1); */
	rval_m_1 = devices_Console_println(sp, i_val0);
	if (rval_m_1 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_1;
	}
	/*	} */
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_Barrier\_isOkToFire}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=472]
void main_Barrier_isOkToFire__Z(int32_t var1, int32_t * retVal) {
	int32_t var2, var3;
	int32_t stack1, stack2;
	stack1 = 1;
	var2 = stack1;
	stack1 = 0;
	var3 = stack1;
	stack1 = var3;
	stack2 = var1;
	stack2 = ((main_Barrier *)  ((uintptr_t)stack2))->flagLjava_lang_BooleanArray_;
	if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray5ID) {
		java_lang_BooleanArray5_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray4ID) {
		java_lang_BooleanArray4_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray1ID) {
		java_lang_BooleanArray1_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray3ID) {
		java_lang_BooleanArray3_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray2ID) {
		java_lang_BooleanArray2_length__I(stack2, &stack2);
	}
	while (stack1 < stack2) {
		stack1 = var1;
		stack1 = ((main_Barrier *)  ((uintptr_t)stack1))->flagLjava_lang_BooleanArray_;
		stack2 = var3;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray5ID) {
			java_lang_BooleanArray5_load_I_Z(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray4ID) {
			java_lang_BooleanArray4_load_I_Z(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray1ID) {
			java_lang_BooleanArray1_load_I_Z(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray3ID) {
			java_lang_BooleanArray3_load_I_Z(stack1, stack2, &stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray2ID) {
			java_lang_BooleanArray2_load_I_Z(stack1, stack2, &stack1);
		}
		if (!(stack1 != 0)) {
			stack1 = 0;
			var2 = stack1;
		}
		var3 = var3 + 1;
		stack1 = var3;
		stack2 = var1;
		stack2 = ((main_Barrier *)  ((uintptr_t)stack2))->flagLjava_lang_BooleanArray_;
		if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray5ID) {
			java_lang_BooleanArray5_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray4ID) {
			java_lang_BooleanArray4_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray1ID) {
			java_lang_BooleanArray1_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray3ID) {
			java_lang_BooleanArray3_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray2ID) {
			java_lang_BooleanArray2_length__I(stack2, &stack2);
		}

	}
	stack1 = var2;
	releaseLock(var1);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54116]
int16 main_Barrier_isOkToFire(int32 *fp, int32 this)
{
	int32* sp;
	int8 b_val1;
	int32 i_val1;
	unsigned char* cobj;
	int32 i_val0;
	int32 index_int32;
	signed char* cobj_15;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 s_val0;
	int8 okToFire;
	int32 i;
	sp = &fp[5]; /* make room for local VM state on the stack */
	/*		boolean okToFire = true; */
	b_val1 = 1;
	/*		boolean okToFire = true; */
	okToFire = b_val1;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	i_val1 = 0;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	i = i_val1;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	goto L24;
	/*			if (this.flag[i] == false) { */
	L7:
	i_val1 = this;
	/*			if (this.flag[i] == false) { */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f;
	/*			if (this.flag[i] == false) { */
	i_val0 = (int32)i;
	/*			if (this.flag[i] == false) { */
	index_int32 = i_val0;
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 15;
#endif
		goto throwNullPointer;
	}
	cobj_15 = HEAP_REF((pointer)(i_val1 + sizeof(Object) + 2), signed char*);
	b_val1 = cobj_15[index_int32];
	/*			if (this.flag[i] == false) { */
	if (b_val1 != 0) {
		goto L21;
	}
	/*				okToFire = false; */
	b_val1 = 0;
	/*				okToFire = false; */
	okToFire = b_val1;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	L21:
	i = (int32)i + 1;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	L24:
	i_val1 = (int32)i;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	i_val0 = this;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f;
	/*		for (int i = 0; i < this.flag.length; i++) { */
	cobj = (unsigned char *) (pointer)i_val0;
	if (cobj == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 32;
#endif
		goto throwNullPointer;
	}
	s_val0 = *(uint16*)(pointer)((HEAP_REF(cobj, unsigned char*)) + sizeof(Object));
	/*		for (int i = 0; i < this.flag.length; i++) { */
	if (i_val1 < s_val0) {
		yieldToScheduler(sp);
		goto L7;
	}
	/*		return okToFire; */
	b_val1 = (int8)okToFire;
	/*		return okToFire; */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return (uint8)b_val1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[519], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return -excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MySafelet\_cleanUp}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=658]
void main_MySafelet_cleanUp__V(int32_t var1) {
	
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.


\subsubsection{\texttt{main\_MySafelet\_handleStartupError}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1183]
void main_MySafelet_handleStartupError_IJ_Z(int32_t var1, int32_t var2, int32_t var3, int32_t var4, int32_t * retVal) {
	int32_t stack1;
	stack1 = 0;
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.


\subsubsection{\texttt{main\_MainMission\_missionMemorySize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1262]
void main_MainMission_missionMemorySize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 1000000;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}  
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.


\subsubsection{\texttt{main\_Barrier\_isAlreadyTriggered}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1270]
void main_Barrier_isAlreadyTriggered_I_Z(int32_t var1, int32_t var2, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack1 = ((main_Barrier *)  ((uintptr_t)stack1))->flagLjava_lang_BooleanArray_;
	stack2 = var2;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray5ID) {
		java_lang_BooleanArray5_load_I_Z(stack1, stack2, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray4ID) {
		java_lang_BooleanArray4_load_I_Z(stack1, stack2, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray1ID) {
		java_lang_BooleanArray1_load_I_Z(stack1, stack2, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray3ID) {
		java_lang_BooleanArray3_load_I_Z(stack1, stack2, &stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray2ID) {
		java_lang_BooleanArray2_load_I_Z(stack1, stack2, &stack1);
	}
	releaseLock(var1);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54057]
int16 main_Barrier_isAlreadyTriggered(int32 *fp, int32 this, int32 id)
{
	int32* sp;
	int32 i_val1;
	unsigned char* cobj;
	int32 i_val0;
	int32 index_int32;
	signed char* cobj_8;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int8 b_val1;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		return this.flag[id]; */
	i_val1 = this;
	/*		return this.flag[id]; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f;
	/*		return this.flag[id]; */
	i_val0 = (int32)id;
	/*		return this.flag[id]; */
	index_int32 = i_val0;
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 8;
#endif
		goto throwNullPointer;
	}
	cobj_8 = HEAP_REF((pointer)(i_val1 + sizeof(Object) + 2), signed char*);
	b_val1 = cobj_8[index_int32];
	/*		return this.flag[id]; */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return (uint8)b_val1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[518], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return -excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MainSequence\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1297]
void main_MainSequence_init__V(int32_t var1) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_memory_ScopeParametersID);
	stack4 = stack3;
	stack5 = 0;
	stack6 = 702000;
	stack7 = 0;
	stack8 = 20000;
	stack9 = 0;
	stack10 = 100000;
	stack11 = 0;
	stack12 = 200000;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12);
	stack4 = newObject(javax_realtime_ConfigurationParametersID);
	stack5 = stack4;
	stack6 = -1;
	stack7 = -1;
	stack8 = newObject(java_lang_LongArray1ID);
	stack9 = stack8;
	stack10 = 0;
	stack11 = 6144;
	java_lang_LongArray1_init_J_V(stack9, stack10, stack11);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack5, stack6, stack7, stack8);
	javax_safetycritical_MissionSequencer_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56002]
int16 main_MainSequence_init_(int32 *fp) {
	int32* sp;
	int32 i_val11;
	int16 rval_m_5;
	int32 i_val10;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int32 i_val3;
	int16 rval_m_49;
	int16 s_val8;
	Object* narray;
	uint16 _count_;
	int8 b_val6;
	int8 index_int8;
	uint32* cobj_72;
	int16 rval_m_73;
	int32 hvm_arg_no_4_77;
	int32 hvm_arg_no_3_77;
	int32 hvm_arg_no_2_77;
	int32 hvm_arg_no_1_77;
	int16 rval_m_77;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		super( */
	i_val11 = this;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32) i_val11;
	sp++;
	if (handleNewClassIndex(sp, 62) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val11 = *(sp - 1);
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*) sp;
		i_val10 = rval_5;
	} else {
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val10 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val10);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*) sp;
		i_val10 = rval_9;
	} else {
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*				new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val11, i_val10);
	if (rval_m_13 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_13;
	}
	/*				new StorageParameters( */
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*				new StorageParameters( */
	i_val11 = *(sp - 1);
	/*						Const.OUTERMOST_SEQ_BACKING_STORE, */
	i_val10 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> OUTERMOST_SEQ_BACKING_STORE_f;
	/*						Const.OUTERMOST_SEQ_BACKING_STORE, */
	lsb_int32 = i_val10;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val10 = msb_int32;
	i_val9 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val8 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val8;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val8 = msb_int32;
	i_val7 = lsb_int32;
	/*						Const.IMMORTAL_MEM, */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> IMMORTAL_MEM_f;
	/*						Const.IMMORTAL_MEM, */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*						Const.MISSION_MEM), */
	i_val4 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> MISSION_MEM_f;
	/*						Const.MISSION_MEM), */
	lsb_int32 = i_val4;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val4 = msb_int32;
	i_val3 = lsb_int32;
	/*				new StorageParameters( */
	rval_m_49 = javax_safetycritical_StorageParameters_init_(sp, i_val11,
			i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4, i_val3);
	if (rval_m_49 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_49;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val11 = *(sp - 1);
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val10 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val9 = -1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	s_val8 = 1;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	_count_ = s_val8;
	narray = (Object*) createArray(47, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 60;
#endif
		goto throwOutOfMemory;
	}
	i_val8 = (int32) (pointer) narray;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val7 = i_val8;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	b_val6 = 0;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	i_val5 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val5;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val5 = msb_int32;
	i_val4 = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	lsb_int32 = i_val4;
	msb_int32 = i_val5;
	index_int8 = b_val6;
	cobj_72 = HEAP_REF((pointer)(i_val7 + sizeof(Object) + 2), uint32*);
	cobj_72[index_int8 << 1] = msb_int32;
	cobj_72[(index_int8 << 1) + 1] = lsb_int32;
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	rval_m_73 = javax_realtime_ConfigurationParameters_init_(sp, i_val11,
			i_val10, i_val9, i_val8);
	if (rval_m_73 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_73;
	}
	/*				new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE})); */
	sp--;
	hvm_arg_no_4_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_77 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_77 = (int32)(*sp);
	rval_m_77 = javax_safetycritical_MissionSequencer_init_(sp, hvm_arg_no_1_77,
			hvm_arg_no_2_77, hvm_arg_no_3_77, hvm_arg_no_4_77);
	if (rval_m_77 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_77;
	}
	/*	} */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory: excep = initializeException(sp,
			JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[534], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MySafelet\_getSequencer}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1551]
void main_MySafelet_getSequencer__Ljavax_safetycritical_MissionSequencer_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = newObject(main_MainSequenceID);
	stack2 = stack1;
	main_MainSequence_init__V(stack2);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56333]
int16 main_MySafelet_getSequencer(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_4;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		return new MainSequence(); */
	if (handleNewClassIndex(sp, 109) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		return new MainSequence(); */
	i_val1 = *(sp - 1);
	/*		return new MainSequence(); */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_4 = main_MainSequence_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		return new MainSequence(); */
	sp--;
	*((int32*)fp) = (int32)(*sp);
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_MainMission\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1666]
void main_MainMission_init__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	javax_safetycritical_Mission_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55689]
int16 main_MainMission_init_(int32 *fp) {
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*public class MainMission extends Mission { */
	i_val0 = this;
	/*public class MainMission extends Mission { */
	*sp = (int32) i_val0;
	sp++;
	sp -= 1;
	rval_m_1 = javax_safetycritical_Mission_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*public class MainMission extends Mission { */
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_Barrier\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1728]
void main_Barrier_init_ILjavax_safetycritical_AperiodicEventHandler__V(int32_t var1, int32_t var2, int32_t var3) {
	int32_t stack1, stack2;
	stack1 = var1;
	java_lang_Object_init__V(stack1);
	stack1 = var1;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack2);
	if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack2, &stack2);
	}
	javax_safetycritical_Services_setCeiling_Ljava_lang_Object_I_V(stack1, stack2);
	stack1 = var1;
	stack2 = var2;
	java_lang_BooleanArray_newArray_I_Ljava_lang_BooleanArray_(stack2, &stack2);
	((main_Barrier *) ((uintptr_t)stack1))->flagLjava_lang_BooleanArray_ = stack2;
	stack1 = var1;
	stack2 = var3;
	((main_Barrier *) ((uintptr_t)stack1))->eLjavax_safetycritical_AperiodicEventHandler_ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=53921]
int16 main_Barrier_init_(int32 *fp, int32 this, int32 size, int32 launch)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_1;
	int16 rval_m_6;
	int32 i_val0;
	int32 rval_6;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_10;
	int32 rval_10;
	int16 rval_m_14;
	int16 s_val0;
	Object* narray;
	uint16 _count_;
	unsigned char* cobj;
	int32 lsb_int32;
	sp = &fp[5]; /* make room for local VM state on the stack */
	/*	public Barrier(int size, AperiodicEventHandler launch) { */
	i_val1 = this;
	/*	public Barrier(int size, AperiodicEventHandler launch) { */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_1 = java_lang_Object_init_(sp);
	if (rval_m_1 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_1;
	}
	/*		Services.setCeiling(this,  */
	i_val1 = this;
	/*				PriorityScheduler.instance().getMaxPriority()); */
	sp += 1;
	rval_m_6 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_6 == -1) {
		rval_6 = *(int32*)sp;
		i_val0 = rval_6;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_6;
	}
	sp -= 1;
	/*				PriorityScheduler.instance().getMaxPriority()); */
	if (i_val0 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 10;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_10 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val0);
	if (rval_m_10 == -1) {
		rval_10 = *(int32*)sp;
		i_val0 = rval_10;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_10;
	}
	sp -= 1;
	/*		Services.setCeiling(this,  */
	rval_m_14 = javax_safetycritical_Services_setCeiling(sp, i_val1, i_val0);
	if (rval_m_14 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_14;
	}
	/*		this.flag = new boolean[size]; */
	i_val1 = this;
	/*		this.flag = new boolean[size]; */
	s_val0 = (int32)size;
	/*		this.flag = new boolean[size]; */
	_count_ = s_val0;
	narray = (Object*) createArray(68, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 20;
#endif
		goto throwOutOfMemory;
	}
	i_val0 = (int32) (pointer) narray;
	/*		this.flag = new boolean[size]; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer)i_val1;
	((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f = lsb_int32;
	/*		this.e = launch; */
	i_val1 = this;
	/*		this.e = launch; */
	i_val0 = launch;
	/*		this.e = launch; */
	lsb_int32 = i_val0;
	cobj = (unsigned char *) (pointer)i_val1;
	((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> e_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[517], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_Button\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1765]
void main_Button_handleAsyncEvent__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	stack1 = ((main_Button *)  ((uintptr_t)stack1))->eventLjavax_safetycritical_AperiodicEventHandler_;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_FireHandlerID) {
		javax_safetycritical_AperiodicEventHandler_release__V(stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_LaunchHandlerID) {
		javax_safetycritical_AperiodicEventHandler_release__V(stack1);
	}

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54834]
int16 main_Button_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val0;
	unsigned char* cobj;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_7;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		this.event.release(); */
	i_val0 = this;
	/*		this.event.release(); */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_Button_c *)HEAP_REF(cobj, void*)) -> event_f;
	/*		this.event.release(); */
	if (i_val0 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 7;
#endif
		goto throwNullPointer;
	}
	rval_m_7 = javax_safetycritical_AperiodicEventHandler_release(sp, i_val0);
	if (rval_m_7 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_7;
	}
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[524], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_Barrier\_trigger}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1803]
void main_Barrier_trigger_I_V(int32_t var1, int32_t var2) {
	int32_t stack1, stack2, stack3;
	stack1 = var1;
	stack1 = ((main_Barrier *)  ((uintptr_t)stack1))->flagLjava_lang_BooleanArray_;
	stack2 = var2;
	stack3 = 1;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray5ID) {
		java_lang_BooleanArray5_store_IZ_V(stack1, stack2, stack3);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray4ID) {
		java_lang_BooleanArray4_store_IZ_V(stack1, stack2, stack3);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray1ID) {
		java_lang_BooleanArray1_store_IZ_V(stack1, stack2, stack3);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray3ID) {
		java_lang_BooleanArray3_store_IZ_V(stack1, stack2, stack3);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray2ID) {
		java_lang_BooleanArray2_store_IZ_V(stack1, stack2, stack3);
	}
	stack1 = var1;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_BarrierID) {
		takeLock(stack1);
		main_Barrier_isOkToFire__Z(stack1, &stack1);
	}
	if (!(stack1 == 0)) {
		stack1 = var1;
		stack1 = ((main_Barrier *)  ((uintptr_t)stack1))->eLjavax_safetycritical_AperiodicEventHandler_;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_FireHandlerID) {
			javax_safetycritical_AperiodicEventHandler_release__V(stack1);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_LaunchHandlerID) {
			javax_safetycritical_AperiodicEventHandler_release__V(stack1);
		}
		stack1 = var1;
		takeLock(stack1);
		main_Barrier_reset__V(stack1);
	}
	releaseLock(var1);
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54320]
int16 main_Barrier_trigger(int32 *fp, int32 this, int32 id)
{
	int32* sp;
	int32 i_val2;
	unsigned char* cobj;
	int32 i_val1;
	int8 b_val0;
	int8 lsb_int8;
	int32 index_int32;
	signed char* cobj_9;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_11;
	int8 b_val2;
	int16 rval_m_25;
	int16 rval_m_30;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		this.flag[id] = true; */
	i_val2 = this;
	/*		this.flag[id] = true; */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f;
	/*		this.flag[id] = true; */
	i_val1 = (int32)id;
	/*		this.flag[id] = true; */
	b_val0 = 1;
	/*		this.flag[id] = true; */
	lsb_int8 = b_val0;
	index_int32 = i_val1;
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	cobj_9 = HEAP_REF((pointer)(i_val2 + sizeof(Object) + 2), signed char*);
	cobj_9[index_int32] = lsb_int8;
	/*		if (isOkToFire())  */
	i_val2 = this;
	/*		if (isOkToFire())  */
	handleMonitorEnterExit((Object*)(pointer)i_val2, 1, sp, "");
	rval_m_11 = main_Barrier_isOkToFire(sp, i_val2);
	if (rval_m_11 >= 0) {
		b_val2 = rval_m_11;
	}
	else
	{
		rval_m_11 = -rval_m_11;
		fp[0] = *sp;
		return rval_m_11;
	}
	/*		if (isOkToFire())  */
	if (b_val2 == 0) {
		goto L34;
	}
	/*				this.e.release(); */
	i_val2 = this;
	/*				this.e.release(); */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> e_f;
	/*				this.e.release(); */
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 25;
#endif
		goto throwNullPointer;
	}
	rval_m_25 = javax_safetycritical_AperiodicEventHandler_release(sp, i_val2);
	if (rval_m_25 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_25;
	}
	/*				this.reset(); */
	i_val2 = this;
	/*				this.reset(); */
	handleMonitorEnterExit((Object*)(pointer)i_val2, 1, sp, "");
	rval_m_30 = main_Barrier_reset(sp, i_val2);
	if (rval_m_30 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_30;
	}
	/*	} */
	L34:
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[521], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MainSequence\_getNextMission}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1847]
void main_MainSequence_getNextMission__Ljavax_safetycritical_Mission_(int32_t var1, int32_t * retVal) {
	int32_t stack1, stack2;
	stack1 = newObject(main_MainMissionID);
	stack2 = stack1;
	main_MainMission_init__V(stack2);
	*retVal = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56253]
int16 main_MainSequence_getNextMission(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	int16 rval_m_4;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		return new MainMission();   */
	if (handleNewClassIndex(sp, 72) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		return new MainMission();   */
	i_val1 = *(sp - 1);
	/*		return new MainMission();   */
	*sp = (int32)i_val1;
	sp++;
	sp -= 1;
	rval_m_4 = main_MainMission_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		return new MainMission();   */
	sp--;
	*((int32*)fp) = (int32)(*sp);
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_MySafelet\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=1948]
void main_MySafelet_init__V(int32_t var1) {
	int32_t stack1;
	stack1 = var1;
	java_lang_Object_init__V(stack1);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56302]
int16 main_MySafelet_init_(int32 *fp) {
	int32* sp;
	int32 i_val0;
	int16 rval_m_1;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*public class MySafelet implements Safelet { */
	i_val0 = this;
	/*public class MySafelet implements Safelet { */
	*sp = (int32) i_val0;
	sp++;
	sp -= 1;
	rval_m_1 = java_lang_Object_init_(sp);
	if (rval_m_1 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_1;
	}
	/*public class MySafelet implements Safelet { */
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_MySafelet\_initializeApplication}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2162]
void main_MySafelet_initializeApplication__V(int32_t var1) {
	
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=56372]
int16 main_MySafelet_initializeApplication(int32 *fp, int32 this)
{
	/*	} */
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_Button\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2208]
void main_Button_init_Ljavax_safetycritical_AperiodicEventHandler_JJ_V(int32_t var1, int32_t var2, int32_t var3, int32_t var4, int32_t var5, int32_t var6) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getNormPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_PeriodicParametersID);
	stack4 = stack3;
	stack5 = newObject(javax_realtime_RelativeTimeID);
	stack6 = stack5;
	stack7 = var5;
	stack8 = var6;
	stack9 = 0;
	javax_realtime_RelativeTime_init_JI_V(stack6, stack7, stack8, stack9);
	stack6 = newObject(javax_realtime_RelativeTimeID);
	stack7 = stack6;
	stack8 = var3;
	stack9 = var4;
	stack10 = 0;
	javax_realtime_RelativeTime_init_JI_V(stack7, stack8, stack9, stack10);
	javax_realtime_PeriodicParameters_init_Ljavax_realtime_RelativeTime_Ljavax_realtime_RelativeTime__V(stack4, stack5, stack6);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_PeriodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_PeriodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);
	stack1 = var1;
	stack2 = var2;
	((main_Button *) ((uintptr_t)stack1))->eventLjavax_safetycritical_AperiodicEventHandler_ = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54496]
int16 main_Button_init_(int32 *fp, int32 this, int32 e, int32 period_ms, int32 lv_3, int32 offset_ms, int32 lv_5)
{
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int32 i_val10;
	int32 i_val9;
	int16 rval_m_28;
	int16 rval_m_38;
	int32 hvm_arg_no_3_42;
	int32 hvm_arg_no_2_42;
	int32 hvm_arg_no_1_42;
	int16 rval_m_42;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_66;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_89;
	int16 rval_m_90;
	const ConstantInfo* constant_;
	int32 hvm_arg_no_5_97;
	int32 hvm_arg_no_4_97;
	int32 hvm_arg_no_3_97;
	int32 hvm_arg_no_2_97;
	int32 hvm_arg_no_1_97;
	int16 rval_m_97;
	unsigned char* cobj;
	sp = &fp[8]; /* make room for local VM state on the stack */
	/*		super( */
	i_val12 = this;
	/*			  new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 62) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	i_val12 = *(sp - 1);
	/*			  new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*)sp;
		i_val11 = rval_5;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getNormPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*)sp;
		i_val11 = rval_9;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getNormPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	if (handleNewClassIndex(sp, 90) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val12 = *(sp - 1);
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 135) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val12 = *(sp - 1);
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val11 = offset_ms;
	i_val10 = lv_5;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val9 = 0;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	rval_m_28 = javax_realtime_RelativeTime_init__(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_28 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_28;
	}
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	if (handleNewClassIndex(sp, 135) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val12 = *(sp - 1);
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val11 = period_ms;
	i_val10 = lv_3;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	i_val9 = 0;
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	rval_m_38 = javax_realtime_RelativeTime_init__(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_38 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_38;
	}
	/*			  new PeriodicParameters(new RelativeTime(offset_ms, 0), new RelativeTime(period_ms, 0)), */
	sp--;
	hvm_arg_no_3_42 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_42 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_42 = (int32)(*sp);
	rval_m_42 = javax_realtime_PeriodicParameters_init_(sp, hvm_arg_no_1_42, hvm_arg_no_2_42, hvm_arg_no_3_42);
	if (rval_m_42 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_42;
	}
	/*			  new StorageParameters( */
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*			  new StorageParameters( */
	rval_m_66 = javax_safetycritical_StorageParameters_init_(sp, i_val12, i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_66 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_66;
	}
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val12 = *(sp - 1);
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val11 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val10 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	s_val9 = 1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	_count_ = s_val9;
	narray = (Object*) createArray(47, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 77;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val8 = i_val9;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	b_val7 = 0;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_89 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_89[index_int8 << 1] = msb_int32;
	cobj_89[(index_int8 << 1) + 1] = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	rval_m_90 = javax_realtime_ConfigurationParameters_init_(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_90 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_90;
	}
	/*			  "Button"); */
	constant_ = &constants[96];
#ifndef PRE_INITIALIZE_CONSTANTS
	initializeStringConstant(constant_, sp);
#endif
	i_val12 = (int32) (pointer) stringConstants[pgm_read_dword(&constant_->value) >> 16];
	/*			  "Button"); */
	sp--;
	hvm_arg_no_5_97 = (int32)(*sp);
	sp--;
	hvm_arg_no_4_97 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_97 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_97 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_97 = (int32)(*sp);
	rval_m_97 = javax_safetycritical_PeriodicEventHandler_init__(sp, hvm_arg_no_1_97, hvm_arg_no_2_97, hvm_arg_no_3_97, hvm_arg_no_4_97, hvm_arg_no_5_97, i_val12);
	if (rval_m_97 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_97;
	}
	/*		this.event = e; */
	i_val12 = this;
	/*		this.event = e; */
	i_val11 = e;
	/*		this.event = e; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_Button_c *)HEAP_REF(cobj, void*)) -> event_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[523], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_FireHandler\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2261]
void main_FireHandler_init_Lmain_Barrier_I_V(int32_t var1, int32_t var2, int32_t var3) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_AperiodicParametersID);
	stack4 = stack3;
	javax_realtime_AperiodicParameters_init__V(stack4);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_AperiodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_AperiodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);
	stack1 = var1;
	stack2 = var2;
	((main_FireHandler *) ((uintptr_t)stack1))->barrierLmain_Barrier_ = stack2;
	stack1 = var1;
	stack2 = var3;
	((main_FireHandler *) ((uintptr_t)stack1))->idI = stack2;

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54903]
int16 main_FireHandler_init_(int32 *fp, int32 this, int32 barrier, int32 id)
{
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int16 rval_m_21;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val10;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_45;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_68;
	int16 rval_m_69;
	const ConstantInfo* constant_;
	int16 rval_m_80;
	int32 hvm_arg_no_1_85;
	int16 rval_m_85;
	int32 rval_85;
	Object* i_obj;
	int16 rval_m_89;
	int32 hvm_arg_no_6_93;
	int32 hvm_arg_no_5_93;
	int32 hvm_arg_no_4_93;
	int32 hvm_arg_no_3_93;
	int32 hvm_arg_no_2_93;
	int32 hvm_arg_no_1_93;
	int16 rval_m_93;
	unsigned char* cobj;
	sp = &fp[5]; /* make room for local VM state on the stack */
	/*		super( */
	i_val12 = this;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32)i_val12;
	sp++;
	if (handleNewClassIndex(sp, 62) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val12 = *(sp - 1);
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*)sp;
		i_val11 = rval_5;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*)sp;
		i_val11 = rval_9;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_13;
	}
	/*			  new AperiodicParameters(), */
	if (handleNewClassIndex(sp, 103) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new AperiodicParameters(), */
	i_val12 = *(sp - 1);
	/*			  new AperiodicParameters(), */
	*sp = (int32)i_val12;
	sp++;
	sp -= 1;
	rval_m_21 = javax_realtime_AperiodicParameters_init_(sp);
	if (rval_m_21 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_21;
	}
	/*			  new StorageParameters( */
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*			  new StorageParameters( */
	rval_m_45 = javax_safetycritical_StorageParameters_init_(sp, i_val12, i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_45 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_45;
	}
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val12 = *(sp - 1);
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val11 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val10 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	s_val9 = 1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	_count_ = s_val9;
	narray = (Object*) createArray(47, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 56;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val8 = i_val9;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	b_val7 = 0;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_68 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_68[index_int8 << 1] = msb_int32;
	cobj_68[(index_int8 << 1) + 1] = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	rval_m_69 = javax_realtime_ConfigurationParameters_init_(sp, i_val12, i_val11, i_val10, i_val9);
	if (rval_m_69 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_69;
	}
	/*			  "FireHandler"+id); */
	if (handleNewClassIndex(sp, 27) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*			  "FireHandler"+id); */
	i_val12 = *(sp - 1);
	/*			  "FireHandler"+id); */
	constant_ = &constants[97];
#ifndef PRE_INITIALIZE_CONSTANTS
	initializeStringConstant(constant_, sp);
#endif
	i_val11 = (int32) (pointer) stringConstants[pgm_read_dword(&constant_->value) >> 16];
	/*			  "FireHandler"+id); */
	rval_m_80 = java_lang_StringBuilder_init__(sp, i_val12, i_val11);
	if (rval_m_80 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_80;
	}
	/*			  "FireHandler"+id); */
	i_val12 = (int32)id;
	/*			  "FireHandler"+id); */
	sp--;
	hvm_arg_no_1_85 = (int32)(*sp);
	rval_m_85 = java_lang_StringBuilder_append__(sp, hvm_arg_no_1_85, i_val12);
	if (rval_m_85 == -1) {
		rval_85 = *(int32*)sp;
		i_val12 = rval_85;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_85;
	}
	/*			  "FireHandler"+id); */
	*sp = (int32)i_val12;
	sp++;
	sp -= 1;
	i_obj = (Object*) (pointer) *sp;
	if (i_obj == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 89;
#endif
		goto throwNullPointer;
	}
	rval_m_89 = java_lang_StringBuilder_toString(sp);
	if (rval_m_89 == -1) {
		sp += 1;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_89;
	}
	/*			  "FireHandler"+id); */
	sp--;
	hvm_arg_no_6_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_5_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_4_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_93 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_93 = (int32)(*sp);
	rval_m_93 = javax_safetycritical_AperiodicEventHandler_init_(sp, hvm_arg_no_1_93, hvm_arg_no_2_93, hvm_arg_no_3_93, hvm_arg_no_4_93, hvm_arg_no_5_93, hvm_arg_no_6_93);
	if (rval_m_93 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_93;
	}
	/*		this.barrier = barrier; */
	i_val12 = this;
	/*		this.barrier = barrier; */
	i_val11 = barrier;
	/*		this.barrier = barrier; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> barrier_f = lsb_int32;
	/*		this.id = id; */
	i_val12 = this;
	/*		this.id = id; */
	i_val11 = (int32)id;
	/*		this.id = id; */
	lsb_int32 = i_val11;
	cobj = (unsigned char *) (pointer)i_val12;
	((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> id_f = lsb_int32;
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory:
	excep = initializeException(sp, JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[526], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MySafelet\_immortalMemorySize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2354]
void main_MySafelet_immortalMemorySize__J(int32_t var1, int32_t * retVal_msb, int32_t * retVal_lsb) {
	int32_t stack1, stack2;
	stack1 = 0;
	stack2 = 0;
	*retVal_lsb = stack2;
	*retVal_msb = stack1;
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill\\
There is no corresponding icecap code for this method.


\subsubsection{\texttt{main\_Barrier\_reset}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2362]
void main_Barrier_reset__V(int32_t var1) {
	int32_t var2;
	int32_t stack1, stack2, stack3;
	stack1 = 0;
	var2 = stack1;
	stack1 = var2;
	stack2 = var1;
	stack2 = ((main_Barrier *)  ((uintptr_t)stack2))->flagLjava_lang_BooleanArray_;
	if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray5ID) {
		java_lang_BooleanArray5_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray4ID) {
		java_lang_BooleanArray4_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray1ID) {
		java_lang_BooleanArray1_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray3ID) {
		java_lang_BooleanArray3_length__I(stack2, &stack2);
	} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray2ID) {
		java_lang_BooleanArray2_length__I(stack2, &stack2);
	}
	while (stack1 < stack2) {
		stack1 = var1;
		stack1 = ((main_Barrier *)  ((uintptr_t)stack1))->flagLjava_lang_BooleanArray_;
		stack2 = var2;
		stack3 = 0;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray5ID) {
			java_lang_BooleanArray5_store_IZ_V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray4ID) {
			java_lang_BooleanArray4_store_IZ_V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray1ID) {
			java_lang_BooleanArray1_store_IZ_V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray3ID) {
			java_lang_BooleanArray3_store_IZ_V(stack1, stack2, stack3);
		} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == java_lang_BooleanArray2ID) {
			java_lang_BooleanArray2_store_IZ_V(stack1, stack2, stack3);
		}
		var2 = var2 + 1;
		stack1 = var2;
		stack2 = var1;
		stack2 = ((main_Barrier *)  ((uintptr_t)stack2))->flagLjava_lang_BooleanArray_;
		if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray5ID) {
			java_lang_BooleanArray5_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray4ID) {
			java_lang_BooleanArray4_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray1ID) {
			java_lang_BooleanArray1_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray3ID) {
			java_lang_BooleanArray3_length__I(stack2, &stack2);
		} else if (((java_lang_Object*)  ((uintptr_t)stack2))->classID == java_lang_BooleanArray2ID) {
			java_lang_BooleanArray2_length__I(stack2, &stack2);
		}

	}
	releaseLock(var1);
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=54224]
int16 main_Barrier_reset(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val2;
	unsigned char* cobj;
	int32 i_val1;
	int8 b_val0;
	int8 lsb_int8;
	int32 index_int32;
	signed char* cobj_14;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 s_val1;
	int32 i;
	sp = &fp[4]; /* make room for local VM state on the stack */
	/*		for (int i = 0; i < this.flag.length; i++) */
	i_val2 = 0;
	/*		for (int i = 0; i < this.flag.length; i++) */
	i = i_val2;
	/*		for (int i = 0; i < this.flag.length; i++) */
	goto L18;
	/*			this.flag[i] = false;  */
	L5:
	i_val2 = this;
	/*			this.flag[i] = false;  */
	cobj = (unsigned char *) (pointer)i_val2;
	i_val2 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f;
	/*			this.flag[i] = false;  */
	i_val1 = (int32)i;
	/*			this.flag[i] = false;  */
	b_val0 = 0;
	/*			this.flag[i] = false;  */
	lsb_int8 = b_val0;
	index_int32 = i_val1;
	if (i_val2 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 14;
#endif
		goto throwNullPointer;
	}
	cobj_14 = HEAP_REF((pointer)(i_val2 + sizeof(Object) + 2), signed char*);
	cobj_14[index_int32] = lsb_int8;
	/*		for (int i = 0; i < this.flag.length; i++) */
	i = (int32)i + 1;
	/*		for (int i = 0; i < this.flag.length; i++) */
	L18:
	i_val2 = (int32)i;
	/*		for (int i = 0; i < this.flag.length; i++) */
	i_val1 = this;
	/*		for (int i = 0; i < this.flag.length; i++) */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_Barrier_c *)HEAP_REF(cobj, void*)) -> flag_f;
	/*		for (int i = 0; i < this.flag.length; i++) */
	cobj = (unsigned char *) (pointer)i_val1;
	if (cobj == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 26;
#endif
		goto throwNullPointer;
	}
	s_val1 = *(uint16*)(pointer)((HEAP_REF(cobj, unsigned char*)) + sizeof(Object));
	/*		for (int i = 0; i < this.flag.length; i++) */
	if (i_val2 < s_val1) {
		yieldToScheduler(sp);
		goto L5;
	}
	/*	} */
	handleMonitorEnterExit((Object*)(pointer)this, 0, fp + 1, "");
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[520], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_MainMission\_initialize}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2437]
void main_MainMission_initialize__V(int32_t var1) {
	int32_t var2, var3, var4, var5;
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7;
	stack1 = newObject(main_LaunchHandlerID);
	stack2 = stack1;
	main_LaunchHandler_init__V(stack2);
	var2 = stack1;
	stack1 = var2;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_FireHandlerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_LaunchHandlerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}
	stack1 = newObject(main_BarrierID);
	stack2 = stack1;
	stack3 = 2;
	stack4 = var2;
	main_Barrier_init_ILjavax_safetycritical_AperiodicEventHandler__V(stack2, stack3, stack4);
	var3 = stack1;
	stack1 = newObject(main_FireHandlerID);
	stack2 = stack1;
	stack3 = var3;
	stack4 = 0;
	main_FireHandler_init_Lmain_Barrier_I_V(stack2, stack3, stack4);
	var4 = stack1;
	stack1 = newObject(main_FireHandlerID);
	stack2 = stack1;
	stack3 = var3;
	stack4 = 1;
	main_FireHandler_init_Lmain_Barrier_I_V(stack2, stack3, stack4);
	var5 = stack1;
	stack1 = var4;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_FireHandlerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_LaunchHandlerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}
	stack1 = var5;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_FireHandlerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	} else if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_LaunchHandlerID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}
	stack1 = newObject(main_ButtonID);
	stack2 = stack1;
	stack3 = var4;
	stack4 = 0;
	stack5 = 2000;
	stack6 = 0;
	stack7 = 0;
	main_Button_init_Ljavax_safetycritical_AperiodicEventHandler_JJ_V(stack2, stack3, stack4, stack5, stack6, stack7);
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ButtonID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}
	stack1 = newObject(main_ButtonID);
	stack2 = stack1;
	stack3 = var5;
	stack4 = 0;
	stack5 = 9000;
	stack6 = 0;
	stack7 = 9000;
	main_Button_init_Ljavax_safetycritical_AperiodicEventHandler_JJ_V(stack2, stack3, stack4, stack5, stack6, stack7);
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_ButtonID) {
		javax_safetycritical_ManagedEventHandler_register__V(stack1);
	}

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55720]
int16 main_MainMission_initialize(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val6;
	int16 rval_m_4;
	int16 rval_m_10;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_20;
	int16 rval_m_31;
	int16 rval_m_42;
	int16 rval_m_49;
	int16 rval_m_55;
	int32 msi;
	int32 lsi;
	const unsigned char *data_;
	const ConstantInfo* constant_;
	int32 i_val3;
	int32 i_val2;
	int32 i_val1;
	int16 rval_m_68;
	int32 hvm_arg_no_1_72;
	int16 rval_m_72;
	int16 rval_m_88;
	int32 hvm_arg_no_1_92;
	int16 rval_m_92;
	int32 launch;
	int32 barrier;
	int32 fire1;
	int32 fire2;
	sp = &fp[7]; /* make room for local VM state on the stack */
	/*		AperiodicEventHandler launch = new LaunchHandler(); */
	if (handleNewClassIndex(sp, 119) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		AperiodicEventHandler launch = new LaunchHandler(); */
	i_val6 = *(sp - 1);
	/*		AperiodicEventHandler launch = new LaunchHandler(); */
	*sp = (int32)i_val6;
	sp++;
	sp -= 1;
	rval_m_4 = main_LaunchHandler_init_(sp);
	if (rval_m_4 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_4;
	}
	/*		AperiodicEventHandler launch = new LaunchHandler(); */
	sp--;
	launch = (int32)(*sp);
	/*		launch.register(); */
	i_val6 = launch;
	/*		launch.register(); */
	rval_m_10 = javax_safetycritical_AperiodicEventHandler_register(sp, i_val6);
	if (rval_m_10 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_10;
	}
	/*		Barrier barrier = new Barrier(2, launch); */
	if (handleNewClassIndex(sp, 133) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		Barrier barrier = new Barrier(2, launch); */
	i_val6 = *(sp - 1);
	/*		Barrier barrier = new Barrier(2, launch); */
	i_val5 = 2;
	/*		Barrier barrier = new Barrier(2, launch); */
	i_val4 = launch;
	/*		Barrier barrier = new Barrier(2, launch); */
	rval_m_20 = main_Barrier_init_(sp, i_val6, i_val5, i_val4);
	if (rval_m_20 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_20;
	}
	/*		Barrier barrier = new Barrier(2, launch); */
	sp--;
	barrier = (int32)(*sp);
	/*		AperiodicEventHandler fire1 = new FireHandler(barrier, 0); 	 */
	if (handleNewClassIndex(sp, 122) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		AperiodicEventHandler fire1 = new FireHandler(barrier, 0); 	 */
	i_val6 = *(sp - 1);
	/*		AperiodicEventHandler fire1 = new FireHandler(barrier, 0); 	 */
	i_val5 = barrier;
	/*		AperiodicEventHandler fire1 = new FireHandler(barrier, 0); 	 */
	i_val4 = 0;
	/*		AperiodicEventHandler fire1 = new FireHandler(barrier, 0); 	 */
	rval_m_31 = main_FireHandler_init_(sp, i_val6, i_val5, i_val4);
	if (rval_m_31 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_31;
	}
	/*		AperiodicEventHandler fire1 = new FireHandler(barrier, 0); 	 */
	sp--;
	fire1 = (int32)(*sp);
	/*		AperiodicEventHandler fire2 = new FireHandler(barrier, 1);  */
	if (handleNewClassIndex(sp, 122) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		AperiodicEventHandler fire2 = new FireHandler(barrier, 1);  */
	i_val6 = *(sp - 1);
	/*		AperiodicEventHandler fire2 = new FireHandler(barrier, 1);  */
	i_val5 = barrier;
	/*		AperiodicEventHandler fire2 = new FireHandler(barrier, 1);  */
	i_val4 = 1;
	/*		AperiodicEventHandler fire2 = new FireHandler(barrier, 1);  */
	rval_m_42 = main_FireHandler_init_(sp, i_val6, i_val5, i_val4);
	if (rval_m_42 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_42;
	}
	/*		AperiodicEventHandler fire2 = new FireHandler(barrier, 1);  */
	sp--;
	fire2 = (int32)(*sp);
	/*		fire1.register(); */
	i_val6 = fire1;
	/*		fire1.register(); */
	rval_m_49 = javax_safetycritical_AperiodicEventHandler_register(sp, i_val6);
	if (rval_m_49 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_49;
	}
	/*		fire2.register(); */
	i_val6 = fire2;
	/*		fire2.register(); */
	rval_m_55 = javax_safetycritical_AperiodicEventHandler_register(sp, i_val6);
	if (rval_m_55 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_55;
	}
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	if (handleNewClassIndex(sp, 100) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	i_val6 = *(sp - 1);
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	i_val5 = fire1;
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	constant_ = &constants[99];
	data_ = (const unsigned char *) pgm_read_pointer(&constant_->data, const void **);
	msi = ((int32) pgm_read_byte(data_)) << 24;
	msi |= ((int32) pgm_read_byte(data_ +1)) << 16;
	msi |= pgm_read_byte(data_ + 2) << 8;
	msi |= pgm_read_byte(data_ + 3);
	lsi = ((int32) pgm_read_byte(data_ + 4)) << 24;
	lsi |= ((int32) pgm_read_byte(data_ + 5)) << 16;
	lsi |= pgm_read_byte(data_ + 6) << 8;
	lsi |= pgm_read_byte(data_ + 7);
	i_val4 = msi;
	i_val3 = lsi;
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	i_val2 = 0;
	i_val1 = 0;
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	rval_m_68 = main_Button_init_(sp, i_val6, i_val5, i_val4, i_val3, i_val2, i_val1);
	if (rval_m_68 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_68;
	}
	/*		(new Button(fire1, 2000, 0)).register();	//2s */
	sp--;
	hvm_arg_no_1_72 = (int32)(*sp);
	rval_m_72 = javax_safetycritical_PeriodicEventHandler_register(sp, hvm_arg_no_1_72);
	if (rval_m_72 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_72;
	}
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	if (handleNewClassIndex(sp, 100) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) *sp);
	}
	sp++;
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	i_val6 = *(sp - 1);
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	i_val5 = fire2;
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	constant_ = &constants[100];
	data_ = (const unsigned char *) pgm_read_pointer(&constant_->data, const void **);
	msi = ((int32) pgm_read_byte(data_)) << 24;
	msi |= ((int32) pgm_read_byte(data_ +1)) << 16;
	msi |= pgm_read_byte(data_ + 2) << 8;
	msi |= pgm_read_byte(data_ + 3);
	lsi = ((int32) pgm_read_byte(data_ + 4)) << 24;
	lsi |= ((int32) pgm_read_byte(data_ + 5)) << 16;
	lsi |= pgm_read_byte(data_ + 6) << 8;
	lsi |= pgm_read_byte(data_ + 7);
	i_val4 = msi;
	i_val3 = lsi;
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	constant_ = &constants[100];
	data_ = (const unsigned char *) pgm_read_pointer(&constant_->data, const void **);
	msi = ((int32) pgm_read_byte(data_)) << 24;
	msi |= ((int32) pgm_read_byte(data_ +1)) << 16;
	msi |= pgm_read_byte(data_ + 2) << 8;
	msi |= pgm_read_byte(data_ + 3);
	lsi = ((int32) pgm_read_byte(data_ + 4)) << 24;
	lsi |= ((int32) pgm_read_byte(data_ + 5)) << 16;
	lsi |= pgm_read_byte(data_ + 6) << 8;
	lsi |= pgm_read_byte(data_ + 7);
	i_val2 = msi;
	i_val1 = lsi;
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	rval_m_88 = main_Button_init_(sp, i_val6, i_val5, i_val4, i_val3, i_val2, i_val1);
	if (rval_m_88 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_88;
	}
	/*		(new Button(fire2, 9000, 9000)).register();	//9s + 9s offset */
	sp--;
	hvm_arg_no_1_92 = (int32)(*sp);
	rval_m_92 = javax_safetycritical_PeriodicEventHandler_register(sp, hvm_arg_no_1_92);
	if (rval_m_92 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_92;
	}
	/*	} */
	return -1;
}
\end{lstlisting}


\subsubsection{\texttt{main\_LaunchHandler\_init}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2612]
void main_LaunchHandler_init__V(int32_t var1) {
	int32_t stack1, stack2, stack3, stack4, stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13;
	stack1 = var1;
	stack2 = newObject(javax_realtime_PriorityParametersID);
	stack3 = stack2;
	javax_safetycritical_PriorityScheduler_instance__Ljavax_safetycritical_PriorityScheduler_(&stack4);
	if (((java_lang_Object*)  ((uintptr_t)stack4))->classID == javax_safetycritical_PrioritySchedulerID) {
		javax_safetycritical_PriorityScheduler_getMaxPriority__I(stack4, &stack4);
	}
	javax_realtime_PriorityParameters_init_I_V(stack3, stack4);
	stack3 = newObject(javax_realtime_AperiodicParametersID);
	stack4 = stack3;
	javax_realtime_AperiodicParameters_init__V(stack4);
	stack4 = newObject(javax_realtime_memory_ScopeParametersID);
	stack5 = stack4;
	stack6 = 0;
	stack7 = 40000;
	stack8 = 0;
	stack9 = 20000;
	stack10 = 0;
	stack11 = 0;
	stack12 = 0;
	stack13 = 0;
	javax_realtime_memory_ScopeParameters_init_JJJJ_V(stack5, stack6, stack7, stack8, stack9, stack10, stack11, stack12, stack13);
	stack5 = newObject(javax_realtime_ConfigurationParametersID);
	stack6 = stack5;
	stack7 = -1;
	stack8 = -1;
	stack9 = newObject(java_lang_LongArray1ID);
	stack10 = stack9;
	stack11 = 0;
	stack12 = 6144;
	java_lang_LongArray1_init_J_V(stack10, stack11, stack12);
	javax_realtime_ConfigurationParameters_init_IILjava_lang_LongArray__V(stack6, stack7, stack8, stack9);
	javax_safetycritical_AperiodicEventHandler_init_Ljavax_realtime_PriorityParameters_Ljavax_realtime_AperiodicParameters_Ljavax_realtime_memory_ScopeParameters_Ljavax_realtime_ConfigurationParameters__V(stack1, stack2, stack3, stack4, stack5);

}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55384]
int16 main_LaunchHandler_init_(int32 *fp) {
	int32* sp;
	int32 i_val12;
	int16 rval_m_5;
	int32 i_val11;
	int32 rval_5;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_9;
	int32 rval_9;
	int16 rval_m_13;
	int16 rval_m_21;
	int32 lsb_int32;
	int32 msb_int32;
	int32 i_val10;
	int32 i_val9;
	int32 i_val8;
	int32 i_val7;
	int32 i_val6;
	int32 i_val5;
	int32 i_val4;
	int16 rval_m_45;
	int16 s_val9;
	Object* narray;
	uint16 _count_;
	int8 b_val7;
	int8 index_int8;
	uint32* cobj_68;
	int16 rval_m_69;
	const ConstantInfo* constant_;
	int32 hvm_arg_no_5_76;
	int32 hvm_arg_no_4_76;
	int32 hvm_arg_no_3_76;
	int32 hvm_arg_no_2_76;
	int32 hvm_arg_no_1_76;
	int16 rval_m_76;
	int32
	this;
	this = (int32)(*(fp + 0));
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		super( */
	i_val12 = this;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	*sp = (int32) i_val12;
	sp++;
	if (handleNewClassIndex(sp, 62) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	i_val12 = *(sp - 1);
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	sp += 1;
	rval_m_5 = javax_safetycritical_PriorityScheduler_instance(sp);
	if (rval_m_5 == -1) {
		rval_5 = *(int32*) sp;
		i_val11 = rval_5;
	} else {
		fp[0] = *sp;
		return rval_m_5;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	if (i_val11 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 9;
#endif
		goto throwNullPointer;
	}
	sp += 1;
	rval_m_9 = javax_realtime_PriorityScheduler_getMaxPriority(sp, i_val11);
	if (rval_m_9 == -1) {
		rval_9 = *(int32*) sp;
		i_val11 = rval_9;
	} else {
		fp[0] = *sp;
		return rval_m_9;
	}
	sp -= 1;
	/*			  new PriorityParameters(PriorityScheduler.instance().getMaxPriority()), */
	rval_m_13 = javax_realtime_PriorityParameters_init_(sp, i_val12, i_val11);
	if (rval_m_13 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_13;
	}
	/*			  new AperiodicParameters(), */
	if (handleNewClassIndex(sp, 103) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			  new AperiodicParameters(), */
	i_val12 = *(sp - 1);
	/*			  new AperiodicParameters(), */
	*sp = (int32) i_val12;
	sp++;
	sp -= 1;
	rval_m_21 = javax_realtime_AperiodicParameters_init_(sp);
	if (rval_m_21 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_21;
	}
	/*			  new StorageParameters( */
	if (handleNewClassIndex(sp, 63) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			  new StorageParameters( */
	i_val12 = *(sp - 1);
	/*						Const.PRIVATE_BACKING_STORE, */
	i_val11 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_BACKING_STORE_f;
	/*						Const.PRIVATE_BACKING_STORE, */
	lsb_int32 = i_val11;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val11 = msb_int32;
	i_val10 = lsb_int32;
	/*						Const.PRIVATE_MEM, */
	i_val9 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> PRIVATE_MEM_f;
	/*						Const.PRIVATE_MEM, */
	lsb_int32 = i_val9;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val9 = msb_int32;
	i_val8 = lsb_int32;
	/*						0, 0), */
	i_val7 = 0;
	i_val6 = 0;
	/*						0, 0), */
	i_val5 = 0;
	i_val4 = 0;
	/*			  new StorageParameters( */
	rval_m_45 = javax_safetycritical_StorageParameters_init_(sp, i_val12,
			i_val11, i_val10, i_val9, i_val8, i_val7, i_val6, i_val5, i_val4);
	if (rval_m_45 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_45;
	}
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	if (handleNewClassIndex(sp, 13) == 0) {
		fp[0] = *sp;
		return getClassIndex((Object*) (pointer) * sp);
	}
	sp++;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val12 = *(sp - 1);
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val11 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val10 = -1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	s_val9 = 1;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	_count_ = s_val9;
	narray = (Object*) createArray(47, (uint16) _count_ FLASHARG((0)));
	if (narray == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 56;
#endif
		goto throwOutOfMemory;
	}
	i_val9 = (int32) (pointer) narray;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val8 = i_val9;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	b_val7 = 0;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	i_val6 = ((struct _staticClassFields_c *)(pointer)HEAP_REF((pointer)classData, staticClassFields_c*)) -> HANDLER_STACK_SIZE_f;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	lsb_int32 = i_val6;
	if (lsb_int32 < 0) {
		msb_int32 = -1;
	} else {
		msb_int32 = 0;
	}
	i_val6 = msb_int32;
	i_val5 = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	lsb_int32 = i_val5;
	msb_int32 = i_val6;
	index_int8 = b_val7;
	cobj_68 = HEAP_REF((pointer)(i_val8 + sizeof(Object) + 2), uint32*);
	cobj_68[index_int8 << 1] = msb_int32;
	cobj_68[(index_int8 << 1) + 1] = lsb_int32;
	/*			  new ConfigurationParameters(-1, -1, new long[] {Const.HANDLER_STACK_SIZE}), */
	rval_m_69 = javax_realtime_ConfigurationParameters_init_(sp, i_val12,
			i_val11, i_val10, i_val9);
	if (rval_m_69 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_69;
	}
	/*			  "LaunchHandler"); */
	constant_ = &constants[98];
#ifndef PRE_INITIALIZE_CONSTANTS
	initializeStringConstant(constant_, sp);
#endif
	i_val12 = (int32) (pointer) stringConstants[pgm_read_dword(
			&constant_->value) >> 16];
	/*			  "LaunchHandler"); */
	sp--;
	hvm_arg_no_5_76 = (int32)(*sp);
	sp--;
	hvm_arg_no_4_76 = (int32)(*sp);
	sp--;
	hvm_arg_no_3_76 = (int32)(*sp);
	sp--;
	hvm_arg_no_2_76 = (int32)(*sp);
	sp--;
	hvm_arg_no_1_76 = (int32)(*sp);
	rval_m_76 = javax_safetycritical_AperiodicEventHandler_init_(sp,
			hvm_arg_no_1_76, hvm_arg_no_2_76, hvm_arg_no_3_76, hvm_arg_no_4_76,
			hvm_arg_no_5_76, i_val12);
	if (rval_m_76 == -1) {
		;
	} else {
		fp[0] = *sp;
		return rval_m_76;
	}
	/*	} */
	return -1;
	throwNullPointer: excep = initializeException(sp,
			JAVA_LANG_NULLPOINTEREXCEPTION,
			JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwOutOfMemory: excep = initializeException(sp,
			JAVA_LANG_OUTOFMEMORYERROR, JAVA_LANG_OUTOFMEMORYERROR_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[529], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch (handler_pc) {
	case (unsigned short) -1: /* Not handled */
	default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}


\subsubsection{\texttt{main\_FireHandler\_handleAsyncEvent}}

\paragraph{Our code}\hfill
\begin{lstlisting}[firstnumber=2759]
void main_FireHandler_handleAsyncEvent__V(int32_t var1) {
	int32_t stack1, stack2;
	stack1 = var1;
	stack1 = ((main_FireHandler *)  ((uintptr_t)stack1))->idI;
	devices_Console_write_I_V(stack1);
	stack1 = var1;
	stack1 = ((main_FireHandler *)  ((uintptr_t)stack1))->barrierLmain_Barrier_;
	stack2 = var1;
	stack2 = ((main_FireHandler *)  ((uintptr_t)stack2))->idI;
	if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_BarrierID) {
		takeLock(stack1);
		main_Barrier_isAlreadyTriggered_I_Z(stack1, stack2, &stack1);
	}
	if (stack1 == 0) {
		stack1 = var1;
		stack1 = ((main_FireHandler *)  ((uintptr_t)stack1))->barrierLmain_Barrier_;
		stack2 = var1;
		stack2 = ((main_FireHandler *)  ((uintptr_t)stack2))->idI;
		if (((java_lang_Object*)  ((uintptr_t)stack1))->classID == main_BarrierID) {
			takeLock(stack1);
			main_Barrier_trigger_I_V(stack1, stack2);
		}

	} else {
		
	}
}
\end{lstlisting}

\paragraph{Corresponding icecap code}\hfill
\begin{lstlisting}[firstnumber=55255]
int16 main_FireHandler_handleAsyncEvent(int32 *fp, int32 this)
{
	int32* sp;
	int32 i_val1;
	unsigned char* cobj;
	int16 rval_m_7;
	int32 i_val0;
#if defined(JAVA_LANG_THROWABLE_INIT_)
	unsigned short pc;
#endif
	int16 excep;
	unsigned short handler_pc;
	int16 rval_m_25;
	int8 b_val1;
	int16 rval_m_49;
	sp = &fp[3]; /* make room for local VM state on the stack */
	/*		devices.Console.println(id);	 */
	i_val1 = this;
	/*		devices.Console.println(id);	 */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> id_f;
	/*		devices.Console.println(id);	 */
	rval_m_7 = devices_Console_println(sp, i_val1);
	if (rval_m_7 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_7;
	}
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	i_val1 = this;
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> barrier_f;
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	i_val0 = this;
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> id_f;
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 25;
#endif
		goto throwNullPointer;
	}
	handleMonitorEnterExit((Object*)(pointer)i_val1, 1, sp, "");
	rval_m_25 = main_Barrier_isAlreadyTriggered(sp, i_val1, i_val0);
	if (rval_m_25 >= 0) {
		b_val1 = rval_m_25;
	}
	else
	{
		rval_m_25 = -rval_m_25;
		fp[0] = *sp;
		return rval_m_25;
	}
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	if (b_val1 == 0) {
		goto L35;
	}
	/*			if (barrier.isAlreadyTriggered(this.id)) return; */
	return -1;
	/*			barrier.trigger(this.id); */
	L35:
	i_val1 = this;
	/*			barrier.trigger(this.id); */
	cobj = (unsigned char *) (pointer)i_val1;
	i_val1 = ((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> barrier_f;
	/*			barrier.trigger(this.id); */
	i_val0 = this;
	/*			barrier.trigger(this.id); */
	cobj = (unsigned char *) (pointer)i_val0;
	i_val0 = ((struct _main_FireHandler_c *)HEAP_REF(cobj, void*)) -> id_f;
	/*			barrier.trigger(this.id); */
	if (i_val1 == 0) {
#if defined(JAVA_LANG_THROWABLE_INIT_)
		pc = 49;
#endif
		goto throwNullPointer;
	}
	handleMonitorEnterExit((Object*)(pointer)i_val1, 1, sp, "");
	rval_m_49 = main_Barrier_trigger(sp, i_val1, i_val0);
	if (rval_m_49 == -1) {
		;
	}
	else
	{
		fp[0] = *sp;
		return rval_m_49;
	}
	/*	} */
	return -1;
	throwNullPointer:
	excep = initializeException(sp, JAVA_LANG_NULLPOINTEREXCEPTION, JAVA_LANG_NULLPOINTEREXCEPTION_INIT_);
	goto throwIt;
	throwIt:
#if defined(JAVA_LANG_THROWABLE_INIT_)
	handler_pc = handleAthrow(&methods[527], excep, pc);
#else
	handler_pc = -1;
#endif
	sp++;
	switch(handler_pc) {
		case (unsigned short)-1: /* Not handled */
		default:
		fp[0] = *(sp - 1);
		return excep;
	}
}
\end{lstlisting}

%\end{landscape}